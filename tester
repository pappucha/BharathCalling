https://www.hairlosstalk.com/interact/threads/22-yrs-old-and-diffuse-thinning-all-over-the-scalp-pics-am-i-screwed-up-totally.70261/

<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ucHospitalSearch.ascx.cs" Inherits="UserControls_ucHospitalSearch" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<link href="../Styles/HealthStyle.css" rel="stylesheet" type="text/css" />
<table>
   <tr>
        <td>
            <asp:Button ID="btnSearchHospital" runat="server" text="Search" CommandName="SearchHospital"
                CssClass="btnStyle" onclick="btnSearchHospital_Click" Width="50px" />


                  <cc1:ModalPopupExtender ID="ModalPopupSearchOrAddHospital" RepositionMode="None"
                    Drag="false" DropShadow="false" BackgroundCssClass="modalPopupBackground" TargetControlID="btnSearchProxy"
                    PopupControlID="SearchOrAddHospital" CancelControlID="btnSearchClose" runat="server">
                </cc1:ModalPopupExtender>
                 <asp:Button ID="btnSearchProxy" runat="server" CssClass="ucControl"/>            
                
                <asp:Panel ID="SearchOrAddHospital" runat="server" CssClass="panel1" GroupingText="Hospital Search">
                        <table class="poupTable" width="550px">
                             <tr>
                                <td colspan="2" style="text-align: center; background-color: Red; color: White;">
                                    <span><strong>Fill Data And Proceed for Search</strong></span> &nbsp;
                                </td>
                             </tr>
                              <tr>
                                <td style="width: 50%;">
                                    NSP Type
                                    <asp:HiddenField ID="hdnClaimType" runat="server" />
                                    <asp:HiddenField ID="hdnARYTPolicy" runat="server" />
                                    <asp:HiddenField ID="hdnPolicyNo" runat="server" />
                                </td>
                                <td style="width: 50%;">
                                    <asp:DropDownList ID="ddlSearchNSPType" runat="server" Width="220px"  AutoPostBack="true"
                                        onselectedindexchanged="ddlSearchNSPType_SelectedIndexChanged">
                                    </asp:DropDownList></td>
                            </tr>
                             <tr>
                                <td>
                                    <asp:Label ID="lblAddHospitalName" runat="server" Text="Hospital Name"></asp:Label></td>
                                <td>                                                                    
                                    <asp:TextBox ID="txtAddHospitalName" runat="server" Width="200px" MaxLength="100" onKeyUp="javascript:return ConvertToUpper(this);" onkeypress="javascript:return fnNumberAlphaDashSpaceBackSpaceKey(event);"></asp:TextBox></td>
                             </tr>
                             <tr>
                                <td>
                                    NSP ID
                                </td>
                                <td>
                                    <asp:TextBox ID="txtSearchNSPID" runat="server" Width="200px"></asp:TextBox>
                                </td>
                            </tr>
                             <tr id="trAddress1" runat="server">
                                <td><asp:Label ID="lblAddress" runat="server" Text="Hospital Address"></asp:Label></td>
                                <td>
                                    <asp:TextBox ID="txtAddAddress1" runat="server" Width="200px" MaxLength="100" onkeypress="javascript:return fnNumberAlphaDashSpaceBackSpaceKey(event);"></asp:TextBox></td>
                             </tr>
                             <tr  id="trAddress2" runat="server">
                                <td>&nbsp;</td>
                                <td>
                                    <asp:TextBox ID="txtAddAddress2" runat="server" Width="200px" MaxLength="100" onkeypress="javascript:return fnNumberAlphaDashSpaceBackSpaceKey(event);"></asp:TextBox>                           
                                </td>
                             </tr>   
                             <tr  id="trAddress3" runat="server">
                                <td>&nbsp;</td>
                                <td>
                                    <asp:TextBox ID="txtAddAddress3" runat="server" Width="200px" MaxLength="100" onkeypress="javascript:return fnNumberAlphaDashSpaceBackSpaceKey(event);"></asp:TextBox>                           
                                </td>
                             </tr>                            
                             <tr ID="trAddress44" runat="server">
                                 <td>
                                     <asp:Label ID="lblLocation" runat="server" Text="Location"></asp:Label>
                                 </td>
                                 <td>
                                     <asp:TextBox ID="txtLocation" runat="server"  Width="200px"></asp:TextBox>
                                 </td>
                             </tr>
                             <tr ID="trAddress5" runat="server">
                                 <td>
                                     <asp:Label ID="lblPinCode" runat="server" Text="Pin Code"></asp:Label>
                                 </td>
                                 <td>
                                     <asp:TextBox ID="txtPinCode" runat="server" MaxLength="6" onpaste="javascript:return false"
                                         onkeypress="javascript:return fnInetgerFieldValidation(event);" Width="200px"></asp:TextBox>
                                 </td>
                             </tr>
                             <tr>
                                <td>
                                    State
                                </td>
                                <td>
                                    <asp:DropDownList ID="ddlSearchState" runat="server" Width="220px" 
                                        OnSelectedIndexChanged="ddlSearchState_SelectedIndexChanged" 
                                        AutoPostBack="True">
                                    </asp:DropDownList>
                                </td>
                            </tr>
                             <tr>
                                <td>
                                    City
                                </td>
                                <td>
                                    <asp:UpdatePanel ID="updCity" runat="server">
                                        <ContentTemplate>
                                            <asp:DropDownList ID="ddlSearchCity" runat="server" Width="220px">
                                            </asp:DropDownList>
                                        </ContentTemplate>
                                        <Triggers>
                                            <asp:AsyncPostBackTrigger ControlID="ddlSearchState" EventName="SelectedIndexChanged" />
                                        </Triggers>
                                    </asp:UpdatePanel>
                                </td>
                            </tr>
                             <tr>
                                <td colspan="2" style="text-align: center; background-color: Red; color: White;">                                    
                                    <asp:Button ID="btnSearch" runat="server" text="Search"   CssClass="btnStyle" 
                                        onclick="btnSearch_Click" /> 
                                    <asp:Button ID="btnSaveHospital" runat="server" text="Save"  CssClass="btnStyle"
                                        onclick="btnSaveHospital_Click" Visible="False" />  
                                    <asp:Button ID="btnSearchClose" runat="server" text="Close"  CssClass="btnStyle" />  
                                </td>
                            </tr>
                             <tr>
                                <td colspan="2"> 
                              <%--   <asp:UpdatePanel ID="upGrid" runat="server">
                                   <ContentTemplate>--%>
                                   <div>
                                        <asp:Label ID="lblSearchMessage" ForeColor="Red" Style="font-weight: 700;text-align:left;" runat="server"></asp:Label>
                                   </div>
                                    <div style="overflow: scroll; height: 250px;">
                                    <asp:GridView ID="gvSearchHospital" runat="server" Width="100%" AutoGenerateColumns="false"
                                        HeaderStyle-CssClass="gridViewHeader">
                                        <Columns>
                                            <asp:TemplateField HeaderText="NSP ID">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblHospitalId" runat="server" Width="70px" Text='<%# Eval("NSPID_VAR") %>'></asp:Label>                                                
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="Name of the Hospital">
                                                <ItemTemplate>
                                                    <asp:HiddenField ID="hdnHospitalId" runat="server"  Value='<%# Eval("NSPID_VAR") %>'/>
                                                    <asp:Label ID="lblHospitalName" runat="server" Width="100px" Text='<%# Eval("HSNAME_VAR") %>'></asp:Label>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="Address">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblAddress" runat="server" Width="100px" Text='<%# Eval("HSADDRESS1_VAR") %>'></asp:Label>
                                                    <asp:Label ID="lblAddress2" Visible="false" runat="server" Width="100px" Text='<%# Eval("HSADDRESS2_VAR") %>'></asp:Label>
                                                    <asp:Label ID="lblAddress3" Visible="false" runat="server" Width="100px" Text='<%# Eval("HSADDRESS3_VAR") %>'></asp:Label>
                                                </ItemTemplate>
                                            </asp:TemplateField>  
                                            <asp:TemplateField HeaderText="State">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblState" runat="server" Width="100px" Text='<%# Eval("TXT_STATE") %>'></asp:Label>
                                                     <asp:HiddenField id="hdnStateCd" Value='<%#Eval("HSSTATE_NUM")%>' runat="server"/>
                                                </ItemTemplate>
                                            </asp:TemplateField>                                          
                                            <asp:TemplateField HeaderText="City">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblCity" runat="server" Width="100px" Text='<%# Eval("TXT_CITYDISTRICT") %>'></asp:Label>
                                                     <asp:HiddenField id="hdnCityCd" Value='<%#Eval("HSDISTRICT_NUM")%>' runat="server"/>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="Location">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblLocation" runat="server" Width="100px" Text='<%# Eval("HSLOCATION_VAR") %>'></asp:Label>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField HeaderText="Pin Code">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblPinCode" runat="server" Width="100px" Text='<%# Eval("HSPINCODE_NUM") %>'></asp:Label>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                              <asp:TemplateField Visible="false">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblEmailId" Visible="false" runat="server" Width="100px" Text='<%# Eval("HSEMAILID_VAR") %>'></asp:Label>
                                                    <asp:Label ID="lblContactNo" Visible="false" runat="server" Width="100px" Text='<%# Eval("TELNO") %>'></asp:Label>
                                                    <asp:Label ID="lblContactPerson" Visible="false" runat="server" Width="100px" Text='<%# Eval("specialinterest_var") %>'></asp:Label>
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                            <asp:TemplateField>
                                                <ItemTemplate>
                                                    <asp:Button ID="btnSelectHospital" runat="server" Text="Select" CssClass="btnStyle"
                                                        Width="60px" onclick="btnSelectHospital_Click" />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                        </Columns>
                                        <HeaderStyle CssClass="gridViewHeader" />
                                    </asp:GridView>
                                    </div> 
                                </td>
                            </tr>
                        </table>   
                </asp:Panel>
              
        </td>
   </tr>
</table>


using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using NSPWCFService;
using Claim_WCFService;
using System.Configuration;

public partial class UserControls_ucHospitalSearch : System.Web.UI.UserControl
{   
    public event EventHandler SelectButtonClick;
    public event EventHandler SearchHospitalClick;
    public string _name;
    public string _address;
    public string _address2;
    public string _address3;
    public string _nspid;
    public string _hospitalcity;
    public int _hospitalcityid;
    public string _hospitalstate;
    public int _hospitalstateid;
    public string _HospitalLocation;
    public string _HospitalPinCode;
    public string _HospitalContactNo;
    public string _HospitalContactPerson;
    public string _HospitalEmailId;

    public string HospitalName
    {
        get { return _name; }
        set { _name = value; }
    }

    public string HospitalPinCode
    {
        get { return _HospitalPinCode; }
        set { _HospitalPinCode = value; }
    }

    public string HospitalContactNo
    {
        get { return _HospitalContactNo; }
        set { _HospitalContactNo = value; }
    }

    public string HospitalContactPerson
    {
        get { return _HospitalContactPerson; }
        set { _HospitalContactPerson = value; }
    }

    public string HospitalEmailID
    {
        get { return _HospitalEmailId; }
        set { _HospitalEmailId = value; }
    }

    public string HospitalAddress
    {
        get { return _address; }
        set { _address = value; }
    }

    public string HospitalAddress2
    {
        get { return _address2; }
        set { _address2 = value; }
    }

    public string HospitalAddress3
    {
        get { return _address3; }
        set { _address3 = value; }
    }

    public string NSPId
    {
        get { return _nspid; }
        set { _nspid = value; }
    }

    public string HospitalCity
    {
        get { return _hospitalcity; }
        set { _hospitalcity = value; }
    }

    public int HospitalCityId
    {
        get { return _hospitalcityid; }
        set { _hospitalcityid = value; }
    }

    public string HospitalState
    {
        get { return _hospitalstate; }
        set { _hospitalstate = value; }
    }

    public int HospitalStateId
    {
        get { return _hospitalstateid; }
        set { _hospitalstateid = value; }
    }

    public string HospitalLocation
    {
        get { return _HospitalLocation; }
        set { _HospitalLocation = value; }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            bindState();
            BindNSPType_Search();
            if (Convert.ToString(hdnClaimType.Value) == "CASHLESS")
                btnSaveHospital.Visible = false;
        }
    }
    
    public void bindState()
    {
        ddlSearchState.DataTextField = "txt_State";
        ddlSearchState.DataValueField = "Num_State_Cd";
        List<AddressDetails> stateNames = new List<AddressDetails>();
        if (Cache["stateNames"] == null)
        {
            AddressClient dbAddressClient = new AddressClient();
            stateNames = dbAddressClient.getState();
            Cache["stateNames"] = stateNames;
        }
        ddlSearchState.DataSource = (List<AddressDetails>)Cache["stateNames"]; ;
        ddlSearchState.DataBind();
        ddlSearchState.Items.Insert(0, "--Select--");
        ddlSearchState.Items[0].Value = "0";
        ddlSearchCity.Items.Insert(0, "--Select--");
        ddlSearchCity.Items[0].Value = "0";
        ddlSearchCity.Enabled = false;
    }

    private void BindNSPType_Search()
    {
        NSPMastersClient objTypeClient = new NSPMastersClient();
        List<E_NSP_BCDE_Type> objlstType;
        try
        {

            objlstType = objTypeClient.getINSPBCDETypeList(0);
            List<E_NSP_BCDE_Type> objNSPTypeList = new List<E_NSP_BCDE_Type>();
            if (Convert.ToString(hdnClaimType.Value) != "CASHLESS")
                objNSPTypeList = (from rc in objlstType where (rc.NSPTYPEID == 1 || rc.NSPTYPEID == 11) select rc).ToList<E_NSP_BCDE_Type>();
            else
                objNSPTypeList = (from rc in objlstType where (rc.NSPTYPEID == 1) select rc).ToList<E_NSP_BCDE_Type>();
           
            ddlSearchNSPType.Items.Clear();
            ddlSearchNSPType.DataSource = objNSPTypeList;
            ddlSearchNSPType.DataTextField = "TYPENAME";
            ddlSearchNSPType.DataValueField = "NSPTYPEID";
            ddlSearchNSPType.DataBind();
            ddlSearchNSPType.Items.Insert(0, new ListItem("--Select--", "0"));
            ddlSearchNSPType.Items[0].Value = "0";
        }
        catch (Exception ex)
        { }
        finally { }
    }

    protected void ddlSearchState_SelectedIndexChanged(object sender, EventArgs e)
    {
        try
        {
            if (ddlSearchState.SelectedIndex > 0)
            {
                AddressClient dbAddressClient = new AddressClient();
                ddlSearchCity.DataTextField = "txt_CityDistrict";
                ddlSearchCity.DataValueField = "Num_CityDistrict_Cd";
                ddlSearchCity.DataSource = dbAddressClient.getCity(Convert.ToInt32(ddlSearchState.SelectedItem.Value));
                ddlSearchCity.DataBind();
                ddlSearchCity.Items.Insert(0, "--Select--");
                ddlSearchCity.Items[0].Value = "0";
                ddlSearchCity.Enabled = true;
            }
            else
            {
                ddlSearchCity.Enabled = false;
                ddlSearchCity.SelectedIndex = 0;
            }
        }
        catch (Exception ex)
        { }
        finally { }
        ModalPopupSearchOrAddHospital.Show();
    }
    
    protected void btnSearch_Click(object sender, EventArgs e)
    {
        try
        {
            bool isValidated = ValidateSearchData();
            if (isValidated)
            {
                NSP_BasicDetailsClient NSPBasicDetailsClient = new NSP_BasicDetailsClient();
                E_NSP_BasicDetails NSPBasicDetail = new NSPWCFService.E_NSP_BasicDetails();
                NSPBasicDetail.NSPTYPEID_NUM = Convert.ToInt32(ddlSearchNSPType.SelectedItem.Value);
                NSPBasicDetail.HSNAME_VAR = txtAddHospitalName.Text.Trim();
                NSPBasicDetail.NSPID_VAR = txtSearchNSPID.Text.Trim();
                NSPBasicDetail.HSSTATE_NUM = Convert.ToInt32(ddlSearchState.SelectedValue);
                NSPBasicDetail.HSDISTRICT_NUM = Convert.ToInt32(ddlSearchCity.SelectedValue);
                NSPBasicDetail.HSPINCODE_NUM = Convert.ToDecimal(string.IsNullOrEmpty(txtPinCode.Text)?"0":txtPinCode.Text);
                List<E_NSP_BasicDetails> objNspBasicDetails = NSPBasicDetailsClient.GetSearchResults(NSPBasicDetail);
                if (!(string.IsNullOrEmpty(hdnClaimType.Value)))
                {
                    if (hdnClaimType.Value == "CASHLESS")
                    {
                        if (objNspBasicDetails.Count > 0)
                        {
                            objNspBasicDetails = (objNspBasicDetails.Where(t => t.EMPANELSTATCASHLESS_NUM == 1)).ToList<E_NSP_BasicDetails>();
                            if (Convert.ToString(hdnARYTPolicy.Value) == "Y")
                            {
                                svcGrpBenfit.GroupBenefitClient grpBenefitClient = new svcGrpBenfit.GroupBenefitClient();
                                svcGrpBenfit.Enroll_Pol_Hosp_List hospitalMethodInput = new svcGrpBenfit.Enroll_Pol_Hosp_List();
                                hospitalMethodInput.Policy_no_TXT = hdnPolicyNo.Value;
                                List<svcGrpBenfit.Enroll_Pol_Hosp_List> enrollHospitalList = grpBenefitClient.getEnroll_Pol_Hosp_List(hospitalMethodInput);
                                if (enrollHospitalList.Count > 0)
                                {
                                    objNspBasicDetails = (from nspHSlist in objNspBasicDetails
                                                       join enrollHSList in enrollHospitalList on nspHSlist.NSPID_VAR equals enrollHSList.NSP_ID_Txt
                                                       select nspHSlist).Distinct().ToList<E_NSP_BasicDetails>();
                                }
                                else
                                    objNspBasicDetails = new List<E_NSP_BasicDetails>();
                            }
                        }
                    }
                }

                gvSearchHospital.DataSource = objNspBasicDetails;
                gvSearchHospital.DataBind();
                lblSearchMessage.Text = "";
                if (!(objNspBasicDetails.Count > 0))
                {
                    lblSearchMessage.Text = "No Data Found.";
                }
            }
            else
            {
                gvSearchHospital.DataSource = null;
                gvSearchHospital.DataBind();
            }
        }
        catch (Exception ex)
        { }
        finally { }
        ModalPopupSearchOrAddHospital.Show();
    }

    /// <summary>
    /// to Validate Data for Search
    /// </summary>
    /// <returns></returns>
    public bool ValidateSearchData()
    {
        bool isValid = true;
        lblSearchMessage.Text = string.Empty;
        string strMessage = string.Empty;
        strMessage = "<ul>";
        if (string.IsNullOrEmpty(txtAddHospitalName.Text))
        {
            isValid = false;
            strMessage = strMessage + "<li> Please Enter Hospital Name.</br></li>";
        }
        else if (txtAddHospitalName.Text.Trim().Length < 3)
        {
                isValid = false;
                strMessage = strMessage + "<li> Please Enter Hospital name at least 3 Character.</li></ul>";
        }
        lblSearchMessage.Text = strMessage;
        return isValid;
    }

    /// <summary>
    /// Validate Data For Save
    /// </summary>
    /// <returns></returns>
    public bool ValidateSavedata()
    {
        bool isValid = true;
        lblSearchMessage.Text = string.Empty;
        string strMessage = string.Empty;
        strMessage = "<ul>";
        if(ddlSearchNSPType.SelectedIndex<=0)
        {
            isValid = false;
            strMessage =strMessage+ "<li> Please Select NSP Type.</br></li>";
        }
        if (string.IsNullOrEmpty(txtAddHospitalName.Text.Trim()))
        {
            isValid = false;
            strMessage = strMessage + "<li> Please Enter Hospital Name.</br></li>";
        }
        if (string.IsNullOrEmpty(txtLocation.Text.Trim()))
        {
            isValid = false;
            strMessage = strMessage + "<li> Please enter Hospital Location.</br></li>";
        }
        if (string.IsNullOrEmpty(txtPinCode.Text.Trim()))
        {
            isValid = false;
            strMessage = strMessage + "<li> Please enter Hospital Pin Code.</br></li>";
        }
        if (ddlSearchState.SelectedIndex<=0)
        {
            isValid = false;
            strMessage = strMessage + "<li> Please Select Hospital State.</br></li>";
        }
        if (ddlSearchCity.SelectedIndex <= 0)
        {
            isValid = false;
            strMessage = strMessage + "<li> Please Select Hospital City.</br></li></ul>";
        }
        lblSearchMessage.Text = strMessage;
        return isValid;
    }

    protected void btnSaveHospital_Click(object sender, EventArgs e)
    {
        bool isValidated = ValidateSavedata();
        if (isValidated)
        {
            NSP_BasicDetailsClient objBasicDetails = new NSP_BasicDetailsClient();
            E_NSP_BasicDetails objNspBasicDetails = new E_NSP_BasicDetails();
            int intNSPType = ddlSearchNSPType.SelectedItem.Value == "0" ? 0 : Convert.ToInt32(ddlSearchNSPType.SelectedItem.Value);
            string strHospitalName = txtAddHospitalName.Text.ToString().Trim();
            string strHospitalAddress1 = txtAddAddress1.Text.ToString().Trim();
            string strHospitalAddress2 = txtAddAddress2.Text.ToString().Trim();
            string strHospitalAddress3 = txtAddAddress3.Text.ToString().Trim();
            string strHospitalState = ddlSearchState.SelectedItem.Value == "0" ? null : ddlSearchState.SelectedItem.Text;
            string strHospitalCity = ddlSearchCity.SelectedItem.Value == "0" ? null : ddlSearchCity.SelectedItem.Text;
            int intStateid = ddlSearchState.SelectedItem.Value == "0" ? 0 : Convert.ToInt32(ddlSearchState.SelectedItem.Value);
            int intCityid = ddlSearchCity.SelectedItem.Value == "0" ? 0 : Convert.ToInt32(ddlSearchCity.SelectedItem.Value);
            decimal pinCode = Convert.ToDecimal(string.IsNullOrEmpty(txtPinCode.Text) ? "0" : txtPinCode.Text);
            string errorMessage=string.Empty;
            objNspBasicDetails = objBasicDetails.CreatENSP("", strHospitalName, strHospitalAddress1, strHospitalAddress2, strHospitalAddress3, intStateid, intCityid, pinCode, intNSPType,0, string.Empty, string.Empty, string.Empty, txtLocation.Text.Trim());
            string existanceMessage =ConfigurationManager.AppSettings["NSPExistanceMessage"];
            if (!(objNspBasicDetails.MSG == existanceMessage))
            {
                NSPId = objNspBasicDetails.NSPID_VAR;
                HospitalName = strHospitalName;
                HospitalAddress = strHospitalAddress1 + " " + strHospitalAddress2 + " " + strHospitalAddress3;
                HospitalCity = strHospitalCity;
                HospitalCityId = intCityid;
                HospitalState = strHospitalState;
                HospitalStateId = intStateid;
                SelectButtonClick(sender, e);
                ModalPopupSearchOrAddHospital.Hide();
            }
            else
            {
                lblSearchMessage.Text ="NSP Already Exists with Provided Hospiatal Name,State,City And Location";
                ModalPopupSearchOrAddHospital.Show();
                gvSearchHospital.DataSource = null;
                gvSearchHospital.DataBind();
            }
        }
        else
        {
            gvSearchHospital.DataSource = null;
            gvSearchHospital.DataBind();
            ModalPopupSearchOrAddHospital.Show();
        }
    }

    protected void btnSelectHospital_Click(object sender, EventArgs e)
    {
        bool b = false;
        int index = ((GridViewRow)((Button)sender).NamingContainer).RowIndex;

        HiddenField hdnNSPId = (HiddenField)gvSearchHospital.Rows[index].FindControl("hdnHospitalId");
        Label lblHospitalName = (Label)gvSearchHospital.Rows[index].FindControl("lblHospitalName");
        Label lblAddress = (Label)gvSearchHospital.Rows[index].FindControl("lblAddress");
        Label lblAddress2 = (Label)gvSearchHospital.Rows[index].FindControl("lblAddress2");
        Label lblAddress3 = (Label)gvSearchHospital.Rows[index].FindControl("lblAddress3");
        Label lblCity = (Label)gvSearchHospital.Rows[index].FindControl("lblCity");
        HiddenField hdnCityId = (HiddenField)gvSearchHospital.Rows[index].FindControl("hdnCityCd");
        Label lblState = (Label)gvSearchHospital.Rows[index].FindControl("lblState");
        Label lblLocation = (Label)gvSearchHospital.Rows[index].FindControl("lblLocation");
        Label lblPinCode = (Label)gvSearchHospital.Rows[index].FindControl("lblPinCode");
        Label lblEmailId = (Label)gvSearchHospital.Rows[index].FindControl("lblEmailId");
        Label lblContactNo = (Label)gvSearchHospital.Rows[index].FindControl("lblContactNo");
        Label lblContactPerson = (Label)gvSearchHospital.Rows[index].FindControl("lblContactPerson");
        HiddenField hdnStateId = (HiddenField)gvSearchHospital.Rows[index].FindControl("hdnStateCd"); 

        HospitalName = lblHospitalName.Text;
        HospitalAddress = lblAddress.Text;
        HospitalAddress2 = lblAddress2.Text;
        HospitalAddress3 = lblAddress3.Text;
        NSPId = hdnNSPId.Value;
        HospitalCity = lblCity.Text;
        HospitalCityId =hdnCityId.Value=="" ? 0: Convert.ToInt32(hdnCityId.Value);
        HospitalState = lblState.Text;
        HospitalStateId = hdnStateId.Value == "" ? 0 : Convert.ToInt32(hdnStateId.Value);
        HospitalLocation = lblLocation.Text;
        HospitalPinCode = lblPinCode.Text;
        HospitalEmailID = lblEmailId.Text;
        HospitalContactNo = lblContactNo.Text;
        HospitalContactPerson = lblContactPerson.Text;
        SelectButtonClick(sender, e);

        ModalPopupSearchOrAddHospital.Hide();
    }

    protected void btnSearchHospital_Click(object sender, EventArgs e)
    {
        bindState();
        BindNSPType_Search();
       // btnSearch.CommandArgument=
        ModalPopupSearchOrAddHospital.Show();
    }

    /// <summary>
    /// To Set ClaimType That Helps in Hospital Search
    /// </summary>
    /// <param name="claimType"></param>
    public void setClaimTypeForSearch(string claimType)
    {
        hdnClaimType.Value = claimType;
    }

    protected void ddlSearchNSPType_SelectedIndexChanged(object sender, EventArgs e)
    {
        ModalPopupSearchOrAddHospital.Show();
        if (ddlSearchNSPType.SelectedIndex > 1)
                btnSaveHospital.Visible = true;
        else
            btnSaveHospital.Visible = false;

        if (Convert.ToString(hdnClaimType.Value) == "CASHLESS")
            btnSaveHospital.Visible = false;
    }
}


----------------------------------------End---------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using NSPWCFService;
using Claim_WCFService;
using System.Configuration;

public partial class UserControls_ucClinicSearch : System.Web.UI.UserControl
{   
    public event EventHandler SelectButtonClick;
    public event EventHandler SearchHospitalClick;
    public string _clinicname;
    public string _address;
    public string _clinicid;
    public string _city;
    public int _cityid;
    public string _state;
    public int _stateid;
    public string _clinicLocation;
    public string _PinCode;
    public string _ContactNo;
    public string _EmailId;
    public string _PANNo;

    public string ClinicName
    {
        get { return _clinicname; }
        set { _clinicname = value; }
    }

    public string PinCode
    {
        get { return _PinCode; }
        set { _PinCode = value; }
    }

    public string ContactNo
    {
        get { return _ContactNo; }
        set { _ContactNo = value; }
    }

    public string EmailID
    {
        get { return _EmailId; }
        set { _EmailId = value; }
    }

    public string ClinicAddress
    {
        get { return _address; }
        set { _address = value; }
    }

    //public string Address1
    //{
    //    get { return _address1; }
    //    set { _address1 = value; }
    //}

    //public string Address2
    //{
    //    get { return _address2; }
    //    set { _address2 = value; }
    //}

    //public string Address3
    //{
    //    get { return _address3; }
    //    set { _address3 = value; }
    //}

    public string ClinicId
    {
        get { return _clinicid; }
        set { _clinicid = value; }
    }

    public string City
    {
        get { return _city; }
        set { _city = value; }
    }

    public int CityId
    {
        get { return _cityid; }
        set { _cityid = value; }
    }

    public string State
    {
        get { return _state; }
        set { _state = value; }
    }

    public int StateId
    {
        get { return _stateid; }
        set { _stateid = value; }
    }

    public string Location
    {
        get { return _clinicLocation; }
        set { _clinicLocation = value; }
    }

    public string PANNo
    {
        get { return _PANNo; }
        set { _PANNo = value; }
    }
    

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            bindState();
    }
    
    public void bindState()
    {
        ddlSearchState.DataTextField = "txt_State";
        ddlSearchState.DataValueField = "Num_State_Cd";
        List<AddressDetails> stateNames = new List<AddressDetails>();
        if (Cache["stateNames"] == null)
        {
            AddressClient dbAddressClient = new AddressClient();
            stateNames = dbAddressClient.getState();
            Cache["stateNames"] = stateNames;
        }
        ddlSearchState.DataSource = (List<AddressDetails>)Cache["stateNames"]; ;
        ddlSearchState.DataBind();
        ddlSearchState.Items.Insert(0, "--Select--");
        ddlSearchState.Items[0].Value = "0";
        ddlSearchCity.Items.Insert(0, "--Select--");
        ddlSearchCity.Items[0].Value = "0";
        ddlSearchCity.Enabled = false;
    }

    protected void ddlSearchState_SelectedIndexChanged(object sender, EventArgs e)
    {
        try
        {
            if (ddlSearchState.SelectedIndex > 0)
            {
                AddressClient dbAddressClient = new AddressClient();
                ddlSearchCity.DataTextField = "txt_CityDistrict";
                ddlSearchCity.DataValueField = "Num_CityDistrict_Cd";
                ddlSearchCity.DataSource = dbAddressClient.getCity(Convert.ToInt32(ddlSearchState.SelectedItem.Value));
                ddlSearchCity.DataBind();
                ddlSearchCity.Items.Insert(0, "--Select--");
                ddlSearchCity.Items[0].Value = "0";
                ddlSearchCity.Enabled = true;
            }
            else
            {
                ddlSearchCity.Enabled = false;
                ddlSearchCity.SelectedIndex = 0;
            }
        }
        catch (Exception ex)
        { }
        finally { }
        ModalPopupSearchOrAddClinic.Show();
    }
    
    protected void btnSearch_Click(object sender, EventArgs e)
    {
        try
        {
                ClaimDetailsClient dbClaimDetailsClient=new ClaimDetailsClient();
                ClinicDetails  clinicDetail = new ClinicDetails();
                clinicDetail.ClinicName_Var=txtClinicName.Text;
                clinicDetail.ClinicStateId_Num=Convert.ToInt32(ddlSearchState.SelectedValue);
                clinicDetail.ClinicCityId_num=Convert.ToInt32(ddlSearchCity.SelectedValue);
                clinicDetail.ClinicPinCode_Num=txtPinCode.Text;
                clinicDetail.ClinicLocation_Var=txtClinicLocation.Text;
                clinicDetail.ClinicContactNo_Var=txtClinicContactNo.Text;
                List<ClinicDetails> ClinicDetails = dbClaimDetailsClient.searchClinicDetails(clinicDetail);
                gvSearchClinic.DataSource = ClinicDetails;
                gvSearchClinic.DataBind();
                lblSearchMessage.Text = "";
                if (!(ClinicDetails.Count > 0))
                {
                    lblSearchMessage.Text = "No Data Found.";
                }
        }
        catch (Exception ex)
        { }
        finally { }
        ModalPopupSearchOrAddClinic.Show();
    }

    protected void btnSaveHospital_Click(object sender, EventArgs e)
    {
        lblSearchMessage.Text = string.Empty;
        try
        {
            ClaimDetailsClient dbClaimDetailsClient = new ClaimDetailsClient();
            ClinicDetails clinicDetail = new ClinicDetails();
            clinicDetail.ClinicName_Var = txtClinicName.Text;
            clinicDetail.ClinicAddress_Var = txtClinicAddress.Value;
            clinicDetail.ClinicState_Var = ddlSearchState.SelectedItem.Text;
            clinicDetail.ClinicCity_Var = ddlSearchCity.SelectedItem.Text;
            clinicDetail.ClinicStateId_Num = Convert.ToInt32(ddlSearchState.SelectedValue);
            clinicDetail.ClinicCityId_num = Convert.ToInt32(ddlSearchCity.SelectedValue);
            clinicDetail.ClinicPinCode_Num = txtPinCode.Text;
            clinicDetail.ClinicLocation_Var = txtClinicLocation.Text;
            clinicDetail.ClinicContactNo_Var = txtClinicContactNo.Text;
            clinicDetail.ClinicPANNo_Var = txtPANNo.Text;
            clinicDetail.ClinicEmailID_Var = txtClinicEmailID.Text;

            string errorMessage = string.Empty;
            Int64 clinicId = dbClaimDetailsClient.insertClinicDetails(clinicDetail);
            if (clinicId > 0)
            {
                ClinicId =Convert.ToString(clinicId);
                ClinicAddress=txtClinicAddress.Value;
                City = ddlSearchCity.SelectedItem.Text;
                State = ddlSearchState.SelectedItem.Text;
                Location = txtClinicLocation.Text;
                PinCode = txtPinCode.Text;
                SelectButtonClick(sender, e);
            }
            else
                lblSearchMessage.Text = "Data Save has been failed";
        }
        catch (Exception ex)
        {
            lblSearchMessage.Text = ex.Message;
            ModalPopupSearchOrAddClinic.Show();
        }
        finally { }
    }

    protected void btnSelectClinic_Click(object sender, EventArgs e)
    {
        bool b = false;
        int index = ((GridViewRow)((Button)sender).NamingContainer).RowIndex;
        HiddenField hdnClinicId = (HiddenField)gvSearchClinic.Rows[index].FindControl("hdnClinicId");
        Label lblClinicName = (Label)gvSearchClinic.Rows[index].FindControl("lblClinicName");
        Label lblAddress = (Label)gvSearchClinic.Rows[index].FindControl("lblAddress");
        Label lblClinicCity = (Label)gvSearchClinic.Rows[index].FindControl("lblClinicCity");
        HiddenField hdnCityCode = (HiddenField)gvSearchClinic.Rows[index].FindControl("hdnCityCode");
        Label lblClinicState = (Label)gvSearchClinic.Rows[index].FindControl("lblClinicState");
        HiddenField hdnStateCode = (HiddenField)gvSearchClinic.Rows[index].FindControl("hdnStateCode");
        Label lblClinicLocation = (Label)gvSearchClinic.Rows[index].FindControl("lblClinicLocation");
        Label lblClinicPinCode = (Label)gvSearchClinic.Rows[index].FindControl("lblClinicPinCode");
        Label lblEmailId = (Label)gvSearchClinic.Rows[index].FindControl("lblEmailId");
        Label lblContactNo = (Label)gvSearchClinic.Rows[index].FindControl("lblContactNo");
        Label lblPANNo = (Label)gvSearchClinic.Rows[index].FindControl("lblPANNo");

        ClinicName = lblClinicName.Text;
        ClinicId = hdnClinicId.Value;
        ClinicAddress = lblAddress.Text;
        City = lblClinicCity.Text;
        CityId = Convert.ToInt32(string.IsNullOrEmpty(hdnCityCode.Value)? "0" : hdnCityCode.Value);
        State = lblClinicState.Text;
        StateId = Convert.ToInt32(string.IsNullOrEmpty(hdnStateCode.Value) ? "0" : hdnStateCode.Value);
        Location = lblClinicLocation.Text;
        PinCode = lblClinicPinCode.Text;
        EmailID = lblEmailId.Text;
        ContactNo = lblContactNo.Text;
        PANNo = lblPANNo.Text;
        SelectButtonClick(sender, e);
        ModalPopupSearchOrAddClinic.Hide();
    }

    protected void btnSearchClinic_Click(object sender, EventArgs e)
    {
        bindState();
        ModalPopupSearchOrAddClinic.Show();
    }
}
<%@ Page Title="" Language="C#" MasterPageFile="~/AMPPS_Main.Master" AutoEventWireup="true"
    CodeBehind="UpdateAircraftVisits.aspx.cs" EnableViewState="true" EnableEventValidation="false" Inherits="QR.AMPPS.UI.LineProductionControl.UpdateAircraftVisits" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<%@ Register TagPrefix="telerik" Namespace="Telerik.Web.UI" Assembly="Telerik.Web.UI" %>
<%@ Register Src="~/UserControls/DropDownControl.ascx" TagName="DropDownControl" TagPrefix="uc1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    
<style type="text/css"> 
 
.PickerNoButtonsCssWidth .riTextBox 
{ 
    width:115px !important; 
} 
 html, body {
 overflow-y:hidden;
}
</style> 
<script src="../Js/jquery-1.10.2.js" type="text/javascript"></script>
 

<telerik:RadCodeBlock runat="server">
    <script type="text/javascript">
        

        var intervalID;

        $(document).ready(function () {

            intervalID = setInterval(IsVisitChanged, 60000);

        });
        function OnErrorCall(response) {
            alert(response.status + " " + response.statusText);
        }
        function OnJqueryOnRequestForAcMech(sender, eventArgs) {
            
            var changetype = 'AcMech';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBAcMech", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td><td style='width: 30px;'>" + item.GF + "</td>" +
                        "<td style='width: 27px;'>" + item.WP + "</td><td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 85px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });

        }
        function OnJqueryOnRequestForAcLic(sender, eventArgs) {
            var changetype = 'Aclic';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBAclic", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td>" +
                        "<td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 100px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 100px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 30px;'>" + item.IS_STANDBY + "</td><td style='width: 40px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });
        }
        function OnJqueryOnRequestForAvLic(sender, eventArgs) {
            var changetype = 'AvLic';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBAvLic", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td>" +
                        "<td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 147px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });
        }
        function OnJqueryOnRequestForAvMech(sender, eventArgs) {

            var changetype = 'AvMech';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBAvMech", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td><td style='width: 30px;'>" + item.GF + "</td>" +
                        "<td style='width: 27px;'>" + item.WP + "</td><td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 85px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });

        }
        function OnJqueryOnRequestForIFE(sender, eventArgs) {

            var changetype = 'IFE';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBIFE", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td><td style='width: 30px;'>" + item.GF + "</td>" +
                        "<td style='width: 27px;'>" + item.WP + "</td><td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 85px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });

        }
        function OnJqueryOnRequestForCB(sender, eventArgs) {
            var changetype = 'CB';
            var SenderId = sender.get_element().id;
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBCb", "hdnACVisitID"));
            AcVisitTxt = visitid.value;
            
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td><td style='width: 30px;'>" + item.GF + "</td>" +
                        "<td style='width: 27px;'>" + item.WP + "</td><td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 85px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });

        }


        function OnJqueryOnRequestForIFEMECH(sender, eventArgs) {
            var changetype = 'IFEMECH';
            var SenderId = sender.get_element().id;
            
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBIFELIC_STAFF", "hdnACVisitID"));
            
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td>" +
                        "<td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 147px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });
        }


        function OnJqueryOnRequestForCBMECH(sender, eventArgs) {
            var changetype = 'CBMECH';
            var SenderId = sender.get_element().id;
            
            var AcVisitTxt = '';
            var visitid = document.getElementById(SenderId.replace("RCBCBLIC_STAFF", "hdnACVisitID"));
            
            AcVisitTxt = visitid.value;
            $.ajax({
                type: "POST",
                url: "UpdateAircraftVisits.aspx/GetAC_REG",
                data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                },
                complete: function () {
                },
                success: function (msg) {
                    //debugger;
                    var obj = $.parseJSON(msg.d);
                    sender.clearItems();
                    $.each(obj, function (a, item) {
                        var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                        comboItem.set_text("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.EMP_SHORTNAME + "</td><td style='width: 45px;'>" + item.STAFFNO + "</td>" +
                        "<td style='width: 30px;'>" + item.DEPTCODE + "</td><td style='width: 50px;'>" + item.SKILL_CAT + "</td>" +
                        "<td style='width: 30px;'>" + item.LIC + "</td>" +
                        "<td style='width: 145px;'>" + item.SHIFT_STARTTEMP + "</td><td style='width: 150px;'>" + item.SHIFT_ENDTEMP + "</td>" +
                        "<td style='width: 30px;'>" + item.COUNTJOB + "</td><td style='width: 40px;'>" + item.OVERLAP + "</td><td style='width: 147px;'>" + item.IS_STANDBY + "</td><td style='width: 30px;'>" + item.CLOCKIN + "</td></tr></table>");
                        comboItem.set_value(item.STAFFID);
                        sender.get_items().insert(a, comboItem);
                        sender.commitChanges();
                    });
                },
                error: OnErrorCall
            });
        }
        
        function onDropDownClosed(combo, eventArgs) {
            var val = combo.get_value();


            if (val == "") {
                combo.clearSelection();
                combo.commitChanges();
            }
        }
        function IsVisitChanged() {

            $.ajax({
                type: "POST",
                url: "../LineProductionControl/BusinessValidation/BusinessValidation.asmx/IsVisitUpdated",
                contentType: "application/json; charset=utf-8",
                data: "{}",
                dataType: "json",
                success: function (msg) {
                    //alert(msg.d);
                    if (msg.d == true) {
                        document.getElementById('<%=btnClick.ClientID %>').click();
                    }
                },
                error: function () {
                }
            });
        }
        function OpenAircraftAllocation(sender, eventArgs) {
            cust = $find('<%=cmbCountJob.ClientID %>')

            var val = cust.get_value();
            if (val != "") {
                var iMyWidth = 500;
                var iMyHeight = window.screen.height-200;
                var win = window.open("ViewAircraftAllocation.aspx?SkillID=" + val, "", "status=no,height=" + iMyHeight + ",width=" + iMyWidth + ",resizable=yes,left=" + 0 + ",top=" + 0 +
                                  ",screenX=0,screenY=0,toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");
                //alert(win);
                win.focus();
                
                cust.clearSelection();              
            }
            return false;
        }

        
        function HandleKeyPress(sender, eventArgs) {
            var menu = sender;
            if (eventArgs.get_domEvent().keyCode == 9) {
                // handle tab out
            }
        }

        function MenuShowing(sender, args) {
            if (column == null) return;
            var menu = sender; var items = menu.get_items();
            //alert(column.get_dataType());
            if (column.get_dataType() == "System.DateTime") {
                var i = 0;
                while (i < items.get_count()) {
                    if (!(items.getItem(i).get_value() in { 'NoFilter': '', 'EqualTo': '', 'NotEqualTo': '', 'GreaterThan': '', 'LessThan': '', 'GreaterThanOrEqualTo': ''
                        , 'LessThanOrEqualTo': ''
                    })) {
                        var item = items.getItem(i);
                        if (item != null)
                            item.set_visible(false);
                    }
                    else {
                        var item = items.getItem(i);
                        if (item != null)
                            item.set_visible(true);
                    } i++;
                }
            }
            if (column.get_dataType() == "System.String") {
                var j = 0; while (j < items.get_count()) {
                    if (!(items.getItem(j).get_value() in { 'NoFilter': '', 'Contains': '', 'DoesNotContain': '', 'StartsWith': '', 'EndsWith': '' })) {
                        var item = items.getItem(j); if (item != null)
                            item.set_visible(false);
                    }
                    else { var item = items.getItem(j); if (item != null) item.set_visible(true); } j++;
                }
            }
            column = null;
            menu.repaint();
        }
        function filterMenuShowing(sender, eventArgs) {
            column = eventArgs.get_column();
        }
        function RowSelected(sender, eventArgs) {
            var grid = sender;
            var MasterTable = grid.get_masterTableView();
            var row = MasterTable.get_dataItems()[eventArgs.get_itemIndexHierarchical()];
            var visitid = MasterTable.getCellByColumnUniqueName(row, "AC_VISIT_ID");
            var sta = MasterTable.getCellByColumnUniqueName(row, "STA");
            var mrg_id = MasterTable.getCellByColumnUniqueName(row, "MRG_ID");
            var arrfrom = MasterTable.getCellByColumnUniqueName(row, "ARR_FROM");
            var acmech = MasterTable.getCellByColumnUniqueName(row, "ACMECH");
            var aclic = MasterTable.getCellByColumnUniqueName(row, "ACLIC");
            var avlic1 = MasterTable.getCellByColumnUniqueName(row, "AVLIC");
            var avlic2 = MasterTable.getCellByColumnUniqueName(row, "AVMECH");
            var ife = MasterTable.getCellByColumnUniqueName(row, "IFE");
            var cb = MasterTable.getCellByColumnUniqueName(row, "CB");
            var checkInfo = MasterTable.getCellByColumnUniqueName(row, "ChecksRemarks");
            var foreign = MasterTable.getCellByColumnUniqueName(row, "Foreign");
            //here cell.innerHTML holds the value of the cell  
            //alert(acmech.childNodes[0].value);
            document.getElementById('ctl00_ContentPlaceHolder1_hndAcVisitID').value = visitid.innerHTML;
            //alert(visitid.innerHTML);
            document.getElementById('ctl00_ContentPlaceHolder1_hndSTA').value = sta.innerHTML;
            document.getElementById('ctl00_ContentPlaceHolder1_hndMrg_ID').value = mrg_id.innerHTML;
            document.getElementById('ctl00_ContentPlaceHolder1_hdnForeign').value = foreign.innerHTML;
            if (arrfrom != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndArrFrom').value = arrfrom.innerHTML;
            //alert(acmech.childNodes[0].value);
            if (acmech != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndAcMech').value = acmech.childNodes[0].value;
            if (aclic != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndAcLic').value = aclic.childNodes[0].value;
            if (avlic1 != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic1').value = avlic1.childNodes[0].value;
            if (avlic2 != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic2').value = avlic2.childNodes[0].value;
            if (ife != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndIFE').value = ife.childNodes[0].value;
            if (cb != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndCB').value = cb.childNodes[0].value;
            if (checkInfo != null)
                document.getElementById('ctl00_ContentPlaceHolder1_hndCheckInfo').value = checkInfo.childNodes[0].value;
        }
        function AddForeignCarrierFlights() {
            var iMyWidth;
            var iMyHeight;
            iMyWidth = (window.screen.width / 2) - (500 + 10);
            iMyHeight = (window.screen.height / 2) - (330 + 50);
            
            var win = window.open("ForeignCarrierFlights.aspx", "Add_Foreign_Carrier_Flights", "status=no,height=550,width=805,resizable=yes,left=" + iMyWidth + ",top=" + iMyHeight +
                                  ",screenX=" + iMyWidth + ",screenY=" + iMyHeight + ",toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");

            win.focus();
            return false;

        }
        function OpenEditAircraftVisits(Visit_ID,Type) {
            var iMyWidth;
            var iMyHeight;
            iMyWidth = (window.screen.width) - (window.screen.width * 0.5 / 3);
            iMyWidth = 900;
            iMyHeight = (window.screen.height / 2) - (330 + 50);
            var win = window.open("EditForeignACVisit.aspx?VisitID=" + Visit_ID + "&Type=" + Type, "Edit_Foreign_Visits", "status=no,height=650,width="+iMyWidth+",resizable=yes,toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no,left=0,top=0");

            win.focus();            
            return true;
        }
        function OpenViewLineJobs(STA, MRG_ID) {
            var iMyWidth;
            var iMyHeight;
            iMyWidth = (window.screen.width / 2) - (500 + 10);
            iMyHeight = (window.screen.height / 2) - (330 + 50);

            var win = window.open("ViewLineJobsForVisits.aspx?STA=" + STA + "&MRG_ID=" + MRG_ID, "View_Line_Jobs", "status=no,height=350,width=1400,resizable=yes,left=" + iMyWidth + ",top=" + iMyHeight +
                                  ",screenX=" + iMyWidth + ",screenY=" + iMyHeight + ",toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");

            win.moveTo(0, 0);
            //win.resizeTo(window.screen.availWidth, window.screen.availHeight)
            win.focus();
            return true;
        }
        function Validate() {

            if (document.getElementById('ctl00_ContentPlaceHolder1_rtpEventStartTime').value == "") {
                alert("Please select view event from.");
                return false;
            }
            if (document.getElementById('ctl00_ContentPlaceHolder1_rtpEventEndTime').value == "") {
                alert("Please select view event to.");
                return false;
            }
            return true;
        }
        function RemoveVisits() {
            if (document.getElementById('ctl00_ContentPlaceHolder1_hndAcVisitID').value == "") {
                alert("Please select a record.");
                return false;
            }
            if (document.getElementById('ctl00_ContentPlaceHolder1_hdnForeign').value != "Int" && document.getElementById('ctl00_ContentPlaceHolder1_hdnForeign').value != "Add") {
                
                if (document.getElementById('ctl00_ContentPlaceHolder1_hndArrFrom').value != "Removed") {
                    alert("Item cannot be deleted! Only Removed items can be deleted.");
                    return false;
                }
                /*alert(document.getElementById('ctl00_ContentPlaceHolder1_hndAcMech').value);
                alert(document.getElementById('ctl00_ContentPlaceHolder1_hndAcLic').value);
                alert(document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic1').value);
                alert(document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic2').value);*/
                if ((document.getElementById('ctl00_ContentPlaceHolder1_hndAcMech').value != "" && document.getElementById('ctl00_ContentPlaceHolder1_hndAcMech').value != "XXXXXXXX")
                || (document.getElementById('ctl00_ContentPlaceHolder1_hndAcLic').value != "" && document.getElementById('ctl00_ContentPlaceHolder1_hndAcLic').value != "XXXXXXXX")
                || (document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic1').value != "" && document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic1').value != "XXXXXXXX")
                || (document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic2').value != "" && document.getElementById('ctl00_ContentPlaceHolder1_hndAvLic2').value != "XXXXXXXX")
                || (document.getElementById('ctl00_ContentPlaceHolder1_hndIFE').value != "" && document.getElementById('ctl00_ContentPlaceHolder1_hndIFE').value != "XXXXXXXX")
                || (document.getElementById('ctl00_ContentPlaceHolder1_hndCB').value!="" && document.getElementById('ctl00_ContentPlaceHolder1_hndCB').value != "XXXXXXXX")) {
                    alert("Cannot deleted an item with allocated staff! Inform the staff and clear the staff data first.");
                    return false;
                }
                if (document.getElementById('ctl00_ContentPlaceHolder1_hndCheckInfo').value != "") {
                    var r = confirm("Warning! This item contains Check data. This data will be lost.")
                    if (r == true) {
                        return true;
                    }
                    else {
                        return false;
                    }
                }
            }
            else {
                var r = confirm("Are you sure do you want to delete?")
                if (r == true) {
                    return true;
                }
                else {
                    return false;
                }
            }
            return true;
        }
        function ImportBays() {
            var r = confirm("Do you want to import bays from the DIA Goundstar system?");
            if (r == true) {
                return true;
            }
            else {
                return false;
            }
        }
        function Datasheet() {
            var win = window.open("AircraftVisitsDatasheet.aspx", "Aircraft_Visits_Datasheet", "status=no,resizable=yes,toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");
            win.moveTo(0, 0);
            win.resizeTo(window.screen.availWidth, window.screen.availHeight)
            win.focus();
            return false;
        }
        function History() {
            
            var win = window.open("AircraftVisitsHistory.aspx", "Aircraft_Visits_History", "status=no,resizable=yes,toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");
            win.moveTo(0, 0);
            win.resizeTo(window.screen.availWidth, window.screen.availHeight)
            win.focus();
            return false;
        }
        function VisitChange(visitid) {
            var win = window.open("AircraftVisitsChange.aspx?VisitId=" + visitid, "Aircraft_Visits_Change", "status=no,height=310,width=1400,resizable=yes,toolbar=no,menubar=no,scrollbars=yes,location=no,directories=no");
            win.moveTo(0, 0);
            win.focus();
        }
        function openACVisitReport() {
           
            
            var combo = $find('<%=cmbReports.ClientID %>');
            if (combo.get_selectedItem() == null) {
                alert('Please select the Report to view.');
                combo.get_inputDomElement().focus();
                return false;
            }
            rptId = combo.get_selectedItem().get_value();
            rptName = combo.get_selectedItem().get_text();
            rptType = 'EDIT_AC_VISITS';
            var viewsFrom = $find('<%=rtpEventStartTime.ClientID %>').get_selectedDate().format('dd-MMM-yyyy HH:mm:ss');
            var viewsTo = $find('<%=rtpEventEndTime.ClientID %>').get_selectedDate().format('dd-MMM-yyyy HH:mm:ss');
            url = "ShowReport.aspx?RptID=" + rptId + "&RptName=" + rptName + "&RptType=" + rptType + "&ViewsFrom=" + viewsFrom + "&ViewsTo=" + viewsTo;
            window.open(url).focus();            
            return true;
        }
        //AcMech
        function ClientRCBAcMech_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AcMech';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAcMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
            //ResetAck();
        }
        function ClientRCBAcMech_OnTextChanged(sender, args) {
            sender.trackChanges();            
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AcMech';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAcMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkAcMech_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'AcMechAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkAcMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
            
        }
        //AC LIC
        function ClientRCBAclic_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'Aclic';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAclic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientRCBAclic_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'Aclic';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAclic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkACLic_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'AclicAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkACLic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }
        //AV LIC
        function ClientRCBAvLic_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AvLic';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAvLic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientRCBAvLic_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AvLic';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAvLic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkAvLic_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'AvLicAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkAvLic", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }
        //AV MECH
        function ClientRCBAvMech_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AvMech';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAvMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientRCBAvMech_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'AvMech';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBAvMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkAvMech_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'AvMechAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkAvMech", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }
        //IFE
        function ClientRCBIFE_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'IFE';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBIFE", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientRCBIFE_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'IFE';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBIFE", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkIFE_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'IFEAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkIFE", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }




        //CB
        function ClientRCBCb_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'CB';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBCb", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientRCBCb_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'CB';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBCb", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkCB_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'CBAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkCB", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }


        //IFE MECH
        function ClientIFE_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'IFE_MECH';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBIFELIC_STAFF", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientIFE_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'IFE_MECH';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBIFELIC_STAFF", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkIFELIC_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'IFEMechAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkIFELIC_STAFF", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }

        //END IFE MECH


        //CB MECh


        function ClientMech_OnSelectedIndexChanged(sender, args) {
            var SenderId = sender.get_element().id;
            var selvalueSubType = document.getElementById(SenderId).value;
            var selvalue = sender._value;
            sender.set_value(selvalue);
            html = $.parseHTML(selvalueSubType);
            $.each(html, function (i, el) {
                sender.set_text(el.childNodes[0].childNodes[0].childNodes[0].innerText);
                sender.set_value(selvalue);
            });
            //var text = selvalueSubType.split("<table style='width: 850px;align:left;'><tr><td style='width: 120px;'>");
            //var seltext = text[1].split("</td><td style='width: 120px;'>");
            //sender.set_text(seltext[0]);
            var senderelem = document.getElementById(SenderId);
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'CB_MECH';
            var item = args.get_item();
            var AcVisitTxt = '';
            if (item != null) {
                item.set_text(sender.get_text());
                item.set_value(selvalue);
                changeVal = selvalue;
                //changeVal = sender.get_value();
                changeText = sender.get_text();
            }
            if ($(senderelem).closest('td').find('span').eq(0).text() != changeText) {
                document.getElementById($(senderelem).closest('td').find('input:checkbox').eq(0).attr('id')).checked = false;
            }
            var hdnAcVisit = document.getElementById(SenderId.replace("RCBCBLIC_STAFF", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt);
        }
        function ClientCBMech_OnTextChanged(sender, args) {
            sender.trackChanges();
            var SenderId = sender.get_element().id;
            var radcombobox1 = $find(SenderId);
            var changeVal = '';
            var changeText = '';
            var changeType = 'CB_MECH';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.get_text();

            var hdnAcVisit = document.getElementById(SenderId.replace("RCBCBLIC_STAFF", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, sender);
            sender.commitChanges();
        }
        function chkCBMECH_OnClick(chk) {
            var SenderId = chk.id;

            var changeVal = '';
            if (chk.checked == true) {
                changeVal = 'Y';
            }
            else {
                changeVal = 'N';
            }

            var changeType = 'CBMechAck';

            var AcVisitTxt = '';

            var hdnAcVisit = document.getElementById(SenderId.replace("chkLicCB", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt);
        }


        //END CB MECH


        //Checks
        function ClientChecks_OnTextChanged(sender) {
            var SenderId = sender.id;
            var changeVal = '';
            var changeText = '';
            var changeType = 'Check';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.value;

            var hdnAcVisit = document.getElementById(SenderId.replace("txtChkRem", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByCheckRemarksText(changeText, changeType, AcVisitTxt, sender);
        }
        //Remarks
        function ClientRemarks_OnTextChanged(sender) {
            var SenderId = sender.id;
            var changeVal = '';
            var changeText = '';
            var changeType = 'Remark';
            var AcVisitTxt = '';
            changeVal = "";
            changeText = sender.value;
            var hdnAcVisit = document.getElementById(SenderId.replace("txtRem", "hdnACVisitID"));
            if (hdnAcVisit != null) {
                AcVisitTxt = hdnAcVisit.value;
            }
            fnUpdateAcVisitByCheckRemarksText(changeText, changeType, AcVisitTxt, sender);
        }
        function fnUpdateVisits(changeVal, changeText, changeType, AcVisitTxt) {
            $.ajax({
                type: "POST",

                url: "../LineProductionControl/BusinessValidation/BusinessValidation.asmx/UpdateVisits",
                contentType: "application/json; charset=utf-8",
                data: "{changeValue:'" + changeVal + "',changeText:'" + changeText + "',changeType:'" + changeType + "',VisitID:'" + AcVisitTxt + "'}",
                dataType: "json",
                success: function (msg) {

                    if (msg.d != "") {
                        //alert(msg.d);
                        // return msg.d;
                    }
                    else {
                        //alert(msg.d);
                        //return msg.d;
                    }

                },
                error: OnError
            });
        }
        function fnUpdateAcVisitByStaffText(changeText, changeType, AcVisitTxt, staffCombobox) {
            $.ajax({
                type: "POST",

                url: "../LineProductionControl/BusinessValidation/BusinessValidation.asmx/UpdateAcVisitByStaffText",
                contentType: "application/json; charset=utf-8",
                data: "{changeText:'" + changeText + "',changeType:'" + changeType + "',VisitID:'" + AcVisitTxt + "'}",
                dataType: "json",
                success: function (msg) {

                    if (msg.d != null && msg.d != "") {
                        staffCombobox.set_text(msg.d);
                        staffCombobox.set_originalText(msg.d);
                    }
                    else {
                        //return msg.d;
                    }
                },
                error: OnError
            });
        }
        function fnUpdateAcVisit_AfterCheckBoxClick(changeVal, changeType, AcVisitTxt) {
            $.ajax({
                type: "POST",

                url: "../LineProductionControl/BusinessValidation/BusinessValidation.asmx/UpdateAcVisitforCheckBoxSelected",
                contentType: "application/json; charset=utf-8",
                data: "{changeValue:'" + changeVal + "',changeType:'" + changeType + "',VisitID:'" + AcVisitTxt + "'}",
                dataType: "json",
                success: function (msg) {

                    if (msg.d != "") {
                        //alert(msg.d);
                        // return msg.d;
                    }
                    else {
                        //alert(msg.d);
                        //return msg.d;
                    }

                },
                error: OnError
            });

        }
        function fnUpdateAcVisitByCheckRemarksText(changeText, changeType, AcVisitTxt, staffCombobox) {
            $.ajax({
                type: "POST",

                url: "../LineProductionControl/BusinessValidation/BusinessValidation.asmx/UpdateAcVisitByCheckRemarks",
                contentType: "application/json; charset=utf-8",
                data: "{changeText:'" + changeText + "',changeType:'" + changeType + "',VisitID:'" + AcVisitTxt + "'}",
                dataType: "json",
                success: function (msg) {

                    if (msg.d != null && msg.d != "") {
                        staffCombobox.value=msg.d;
                        //staffCombobox.set_originalText(msg.d);
                    }
                    else {
                        //return msg.d;
                    }
                },
                error: OnError
            });
        }
        function OnError(result) {
            //alert("Error");
            //alert(result.d);
        }
        function onRequestStart(sender, args) {
            if (args.get_eventTarget().indexOf("ExportToExcelButton") >= 0)
                args.set_enableAjax(false);
        }
        function onDropDownClosed(combo, eventArgs) {
            var val = combo.get_value();
            if (val == "") {
                combo.clearSelection();
                combo.commitChanges();
            }
        }


       


        

    </script>
    </telerik:RadCodeBlock>
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
        <%--<ClientEvents OnRequestStart="onRequestStart"></ClientEvents>--%>
        <AjaxSettings>
            <telerik:AjaxSetting AjaxControlID="RadGrid1">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    </UpdatedControls>
              </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="Timer1">
                <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" LoadingPanelID="LoadingPanel1">
                    </telerik:AjaxUpdatedControl>
                </UpdatedControls>
            </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="rtpEventStartTime">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="rtpEventStartTime" />
                 </UpdatedControls>
            </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="rtpEventEndTime">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="rtpEventEndTime" />
                 </UpdatedControls>
            </telerik:AjaxSetting>
            <telerik:AjaxSetting AjaxControlID="btnApply">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    <telerik:AjaxUpdatedControl ControlID="divAlertMsg" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <telerik:AjaxSetting AjaxControlID="lnkRefresh">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    <telerik:AjaxUpdatedControl ControlID="rtpEventStartTime" />
                    <telerik:AjaxUpdatedControl ControlID="rtpEventEndTime" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <telerik:AjaxSetting AjaxControlID="lnkDeleteRemovedItem">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    <telerik:AjaxUpdatedControl ControlID="divAlertMsg" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <telerik:AjaxSetting AjaxControlID="lnkViewLog">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <telerik:AjaxSetting> 
                    <UpdatedControls> 
                         <telerik:AjaxUpdatedControl ControlID="btnReports" /> 
                    </UpdatedControls> 
               </telerik:AjaxSetting>
               <telerik:AjaxSetting AjaxControlID="btnClear">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    <telerik:AjaxUpdatedControl ControlID="ddACRegSearch" />
                    <telerik:AjaxUpdatedControl ControlID="ddlService" />
                    <telerik:AjaxUpdatedControl ControlID="ddAcTypeSearch1" />
                    <telerik:AjaxUpdatedControl ControlID="txtFromFlt" />
                    <telerik:AjaxUpdatedControl ControlID="ddlAlert" />
                    <telerik:AjaxUpdatedControl ControlID="txtToFlt" />
                    <telerik:AjaxUpdatedControl ControlID="txtOldBay" />
                    <telerik:AjaxUpdatedControl ControlID="txtChecks" />
                    <telerik:AjaxUpdatedControl ControlID="ddStaffSearch" />
                    <telerik:AjaxUpdatedControl ControlID="ddAreaSearch" />
                    <telerik:AjaxUpdatedControl ControlID="ddSortSearch" />
                    <telerik:AjaxUpdatedControl ControlID="rtpEventStartTime" />
                    <telerik:AjaxUpdatedControl ControlID="rtpEventEndTime" />
                    <telerik:AjaxUpdatedControl ControlID="divAlertMsg" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <telerik:AjaxSetting AjaxControlID="lnkImportBays">
                 <UpdatedControls>
                    <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    <telerik:AjaxUpdatedControl ControlID="divAlertMsg" />
                 </UpdatedControls>
              </telerik:AjaxSetting>
              <%--<telerik:AjaxSetting AjaxControlID="RadGrid1">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="divAlertMsg" />
                    </UpdatedControls>
              </telerik:AjaxSetting>--%>
              <telerik:AjaxSetting AjaxControlID="btnClick">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="RadGrid1" />
                    </UpdatedControls>
              </telerik:AjaxSetting>
        </AjaxSettings>
    </telerik:RadAjaxManager>
    <telerik:RadAjaxLoadingPanel ID="LoadingPanel1" runat="server"></telerik:RadAjaxLoadingPanel>
    <div class="mrgT5">
        <div class="cf">
    
        <asp:Button runat="server" id="btnTrigger"  style="display:none;"/>
            <div>
                <%--<div id="mnuNav" class="breadcrumb" runat="server">
                    <asp:Literal ID="litMenuNav" runat="server"></asp:Literal>
                </div>--%>
            <div>
            <div id="content">
                        <div class="contentHeader">
                            <table border="0" cellpadding="0" cellspacing="0" style="width: 98%">
                                <tr>
                                    <td style="width: 15%" valign="top">
                                        Edit Aircraft Visits
                                        <asp:Button runat="server" OnClick="BtnClick_Click" style="display:none;" ID="btnClick"/>
                                        <input type="hidden" runat="server" id="hdCollapse" />
                                        <asp:HiddenField ID="hndAcVisitID" runat="server" />
                                        <asp:HiddenField ID="hndSTA" runat="server" />
                                        <asp:HiddenField ID="hndMrg_ID" runat="server" />
                                        <asp:HiddenField ID="hndArrFrom" runat="server" />
                                        <asp:HiddenField ID="hndAcMech" runat="server" />
                                        <asp:HiddenField ID="hndAcLic" runat="server" />
                                        <asp:HiddenField ID="hndAvLic1" runat="server" />
                                        <asp:HiddenField ID="hndAvLic2" runat="server" />
                                        <asp:HiddenField ID="hndIFE" runat="server" />
                                        <asp:HiddenField ID="hndCB" runat="server" />
                                        <asp:HiddenField ID="hndCheckInfo" runat="server" />
                                        <asp:HiddenField ID="hdnForeign" runat="server" />
                                          <asp:HiddenField ID="hdnData" runat="server" Value=""/>
                                    </td>
                                    <td style="width: 50%" valign="top">
                                            <div class="info" id="divAlertMsg" runat="server" visible="true">
                                            </div>
                                    </td>
                                    <td valign="top">
                                        <div class="right">
                                            <div class="left mrgT3 mrgR10">
                                                <a href="#" class="linkHref" onclick="fnShowHideSearch()" id="srchLink" runat="server">
                                                    <img id="imgShowSearch" alt="Show/Hide Search" src="../images/btn-showsearch.png"
                                                        runat="server" border="0" />
                                                </a>
                                            </div>
                                            </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="padd5 mainContentBox GreyBBdr">
                            <div class="cf" id="dvSearch" runat="server">
                                <div>
                                    <div class="fieldHeader">
                                        Search Aircraft Visits</div>
                                </div>
                                <div class="cf">
                                <div class="fieldContent cf">
                                    <div class="left">
                                        <table border="0" width="100%">
                                            <tr>
                                                <td align="right" style="width: 8%">
                                                    View Event From :
                                                </td>
                                                <td style="width: 10%">
                                                    <telerik:RadDateTimePicker ID="rtpEventStartTime" runat="server" DateInput-AutoPostBack="true"
                                                     TimePopupButton-Visible="true" AutoPostBack="true" AutoPostBackControl="Both" OnSelectedDateChanged="rtpEventStartTime_SelectedDateChanged"
                                                        TimeView-Interval="01:00:00" CssClass="PickerNoButtonsCssWidth" DatePopupButton-Visible="false" ShowPopupOnFocus="true" TimeView-TimeFormat="HH:mm">
                                                        <DateInput ID="dateInput1" ShouldResetWidthInPixels="false" Enabled="true" runat="server" DateFormat="dd-MMM-yyyy HH:mm:ss">
                                                        </DateInput >
                                                    </telerik:RadDateTimePicker>
                                                </td>
                                                <td align="right" style="width: 1%">
                                                    To :
                                                </td>
                                                <td align="left" style="width: 10%">
                                                    <telerik:RadDateTimePicker ID="rtpEventEndTime" runat="server" DateInput-AutoPostBack="true"
                                                        TimePopupButton-Visible="true"  AutoPostBack="true" AutoPostBackControl="Both" OnSelectedDateChanged="rtpEventEndTime_SelectedDateChanged"
                                                        TimeView-Interval="01:00:00" CssClass="PickerNoButtonsCssWidth" DatePopupButton-Visible="false" ShowPopupOnFocus="true" TimeView-TimeFormat="HH:mm">
                                                        <DateInput ID="dateInput2" Enabled="true" ShouldResetWidthInPixels="false" runat="server" DateFormat="dd-MMM-yyyy HH:mm:ss">
                                                        </DateInput>
                                                    </telerik:RadDateTimePicker>
                                                </td>
                                                <td align="right" style="width: 3%">
                                                      Service:
                                                </td>
                                                <td align="left" style="width: 5%">
                                                    <telerik:RadComboBox ID="ddlService" runat="server" Height="80" Width="122px"  MarkFirstMatch="true" EmptyMessage="">
                                                        <Items>
                                                            <telerik:RadComboBoxItem Value="All" Text=" " />
                                                            <telerik:RadComboBoxItem Value="Int" Text="Int" />
                                                            <telerik:RadComboBoxItem Value="QR" Text="QR" />
                                                        </Items>
                                                    </telerik:RadComboBox>
                                                </td>
                                                <td align="right" style="width: 4%">
                                                    AC Reg:
                                                </td>
                                                <td align="left" style="width: 5%">
                                                    <telerik:RadComboBox runat="server" ID="ddACRegSearch" DataTextField="ACREG"
                                                        ShowMoreResultsBox="false" DataValueField="MRG_ID" Height="350px" Width="60px"
                                                        DropDownWidth="200px" OnItemsRequested="ddACRegSearch_ItemsRequested" HighlightTemplatedItems="true"
                                                        EnableVirtualScrolling="false" MarkFirstMatch="true" EnableLoadOnDemand="True"
                                                        OnClientDropDownClosed="onDropDownClosed" OnClientBlur="onDropDownClosed" EmptyMessage="">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="col1">AC Reg</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <ItemTemplate>
                                                            <ul>
                                                                <li class="col1">
                                                                    <%# DataBinder.Eval(Container.DataItem, "ACREG")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>
                                                    </telerik:RadComboBox>
                                                    
                                                </td>
                                                <td align="right" style="width: 4%">
                                                    AC Type:
                                                </td>
                                                <td align="left" colspan="3" style="width:160px;">
                                                   <uc1:DropDownControl ID="ddAcTypeSearch1" runat="server"/>
                                                </td>
                                                <td align="right" style="width: 4%">
                                                    From(Flt):
                                                </td>
                                                <td align="left" style="width: 5%">
                                                    <asp:TextBox ID="txtFromFlt" runat="server" CssClass="textField" Width="50px"></asp:TextBox>
                                                </td>
                                                <td align="right" style="width: 3%"> 
                                                    To(Flt):
                                                </td>
                                                <td  align="left" style="width: 5%">
                                                    <asp:TextBox ID="txtToFlt" runat="server" CssClass="textField" Width="50px"></asp:TextBox>
                                                </td>
                                                
                                              </tr>
                                              <tr>
                                                <td align="right">
                                                    Oldbays/ETAs/Flts:
                                                </td>
                                                <td align="left">
                                                    <asp:TextBox ID="txtOldBay" runat="server" CssClass="textField" Width="150px"></asp:TextBox>
                                                </td>
                                                <td align="right">
                                                    Checks/Remarks:
                                                </td>
                                                <td>
                                                    <asp:TextBox ID="txtChecks" runat="server" CssClass="textField" Width="120px"></asp:TextBox>
                                                </td>
                                                <td align="right">
                                                    Staff:
                                                </td>
                                                <td>
                                                    <telerik:RadComboBox runat="server" ID="ddStaffSearch" DataTextField="EMP_SHORTNAME"
                                                        ShowMoreResultsBox="false" DataValueField="STAFFID" Height="350px" Width="125px"
                                                        DropDownWidth="440px" OnItemsRequested="ddStaffSearch_ItemsRequested" HighlightTemplatedItems="true"
                                                        EnableVirtualScrolling="false" MarkFirstMatch="true" EnableLoadOnDemand="True"
                                                        OnClientDropDownClosed="onDropDownClosed" OnClientBlur="onDropDownClosed" EmptyMessage="">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="col1">Staff Name</li>
                                                                <li class="radcombocol2">Staff No</li>
                                                                <li class="radcombocol2">Skill Cat</li>
                                                                <li class="radcombocol2">Crew Code</li>
                                                                <%--<li class="radcombocol3">Shift Start</li>
                                                                <li class="radcombocol4">Shift End</li>--%>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <ItemTemplate>
                                                            <ul>
                                                                <li class="col1">
                                                                    <%# DataBinder.Eval(Container.DataItem, "EMP_SHORTNAME")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container.DataItem, "STAFFNO")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container.DataItem, "SKILL_CAT")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container.DataItem, "DEPTCODE")%>
                                                                </li>
                                                                <%--<li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container.DataItem, "SHIFT_START", "{0:dd-MMM-yyyy HH:mm}")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container.DataItem, "SHIFT_END", "{0:dd-MMM-yyyy HH:mm}")%>
                                                                </li>--%>
                                                            </ul>
                                                        </ItemTemplate>
                                                    </telerik:RadComboBox>
                                                </td>
                                                <td align="right">
                                                    Area:
                                                </td>
                                                <td>
                                                    <telerik:RadComboBox runat="server" ID="ddAreaSearch" DataTextField="AREA"
                                                        ShowMoreResultsBox="false" DataValueField="AREA" Height="140px" Width="60px"
                                                        DropDownWidth="200px" ItemsPerRequest="10" OnItemsRequested="ddAreaSearch_ItemsRequested"
                                                        EnableVirtualScrolling="false" MarkFirstMatch="true" EnableLoadOnDemand="True" HighlightTemplatedItems="true"
                                                        OnClientDropDownClosed="onDropDownClosed" OnClientBlur="onDropDownClosed" EmptyMessage="">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="col1">Area</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <ItemTemplate>
                                                            <ul>
                                                                <li class="col1">
                                                                    <%# DataBinder.Eval(Container.DataItem, "AREA")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>
                                                    </telerik:RadComboBox>
                                                </td>
                                                <td align="right" style="width: 3%">
                                                      Sort:
                                                </td>
                                                <td align="left" style="width: 5%">
                                                    <telerik:RadComboBox ID="ddSortSearch" runat="server" Width="70px"  MarkFirstMatch="true" DropDownWidth="100px" EmptyMessage="">
                                                        <Items>
                                                            <telerik:RadComboBoxItem Value="ETA" Text="ETA" />
                                                            <telerik:RadComboBoxItem Value="NextDue" Text="NextDue" />
                                                            <telerik:RadComboBoxItem Value="ETD" Text="ETD" />
                                                            <telerik:RadComboBoxItem Value="Bay" Text="Bay" />
                                                        </Items>
                                                    </telerik:RadComboBox>
                                                </td>
                                                <td align="right" style="width: 4%">
                                                    Alert:
                                                </td>
                                                <td align="left" style="width: 5%">                                                      
                                                    <telerik:RadComboBox ID="ddlAlert" runat="server" Height="100" Width="65px" CssClass="dd"  MarkFirstMatch="true" EmptyMessage="">
                                                        <Items>
                                                            <telerik:RadComboBoxItem Value="" Text="" />
                                                            <telerik:RadComboBoxItem Value="X" Text="X" />
                                                            <telerik:RadComboBoxItem Value="F" Text="Fuel" />
                                                            <telerik:RadComboBoxItem Value="E" Text="ETOPS" />
                                                            <telerik:RadComboBoxItem Value="T" Text="Tow" />
                                                        </Items>
                                                    </telerik:RadComboBox>
                                                </td>
                                                <td colspan="6">
                                                    <table width="100%">
                                                        <tr>
                                                            <td>
                                                                <div class="buttons right  mrgL10">
                                                                    <asp:LinkButton ID="btnApply" runat="server" OnClientClick="javascript: return Validate();" OnClick="btnApply_Click">
                                                                        <img id="imgSearch" alt="Search" src="../images/ico-search.png" runat="server" />
                                                                        Search
                                                                    </asp:LinkButton>
                                                                    <asp:LinkButton ID="btnClear" runat="server" OnClick="btnClear_Click">
                                                                        <img id="Img9" alt="Clear" src="../images/ico-clear.png" runat="server" />Clear
                                                                    </asp:LinkButton>
                                                                </div>
                                                    
                                                            </td> 
                                                        </tr>
                                                    </table>
                                                </td>                                                  
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            </div>
                            <div>
                                <div class="fieldHeader">
                                    <table width="100%" border="0">
                                        <tr align="left">
                                            <td width="45%">
                                                Aircraft Visit List               
                                            </td>
                                            <td width="10%">
                                            <telerik:RadComboBox ID="rcbACVisit" runat="server" Width="100px" OnSelectedIndexChanged="rcbACVisit_IndexChanged" AutoPostBack="true" AllowCustomText="true" Height="150px"
                                                 OnClientDropDownClosing="OpenAircraftAllocation">
                                                    <Items>
                                                        <telerik:RadComboBoxItem Value="ACAV" Text="AC/AV" Selected="true"/>
                                                        <telerik:RadComboBoxItem Value="CBIFE" Text="CB/IFE"/>
                                                    </Items>
                                                </telerik:RadComboBox>
                                            </td>
                                            <td width="15%">
                                                Count Jobs:&nbsp;<telerik:RadComboBox ID="cmbCountJob" runat="server" Width="100px" AllowCustomText="true" Height="150px"
                                                 OnClientDropDownClosing="OpenAircraftAllocation">
                                                    <Items>
                                                        <telerik:RadComboBoxItem Value="" Text="" />
                                                        <telerik:RadComboBoxItem Value="ACMech" Text="AC Mech"/>
                                                        <telerik:RadComboBoxItem Value="B1Eng" Text="B1 Eng"/>
                                                        <telerik:RadComboBoxItem Value="AVMech" Text="AV Mech"/>
                                                        <telerik:RadComboBoxItem Value="B2Eng" Text="B2 Eng"/>
                                                        <telerik:RadComboBoxItem Value="IFE" Text="IFE"/>
                                                        <telerik:RadComboBoxItem Value="CB" Text="CB"/>
                                                    </Items>
                                                </telerik:RadComboBox>
                                            </td>
                                            <td width="18%">
                                                Reports:&nbsp;<telerik:RadComboBox ID="cmbReports" runat="server" AllowCustomText="true">
                                                    <Items>
                                                        <telerik:RadComboBoxItem Value="Gen" Text="General" />
                                                        <telerik:RadComboBoxItem Value="B1" Text="B1" />
                                                        <telerik:RadComboBoxItem Value="B1_Eng" Text="B1 Eng Sort" />
                                                        <telerik:RadComboBoxItem Value="B1_Mech" Text="B1 Mech Sort" />
                                                        <telerik:RadComboBoxItem Value="B2" Text="B2" />
                                                        <telerik:RadComboBoxItem Value="B2_Eng" Text="B2 Eng Sort" />
                                                         <telerik:RadComboBoxItem Value="IFECB" Text="IFE,CB" />
                                                    </Items>
                                                </telerik:RadComboBox>
                                            </td>
                                            <td class="buttons" width="12%">
                                                <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                                                <ContentTemplate>
                                                    <asp:LinkButton ID="btnReports" runat="server" CausesValidation="false" OnClientClick="return openACVisitReport()">
                                                        <img id="img10" alt="View Report" src="../images/pdf.png" runat="server" />
                                                        View Report
                                                    </asp:LinkButton>
                                                </ContentTemplate>
                                                </asp:UpdatePanel>
                                            </td> 
                                        </tr>
                                    </table>
                                </div>
                            </div>
                            <div id="dvInputs" runat="server">
                                <%--<asp:Panel ID="Panel1" runat="server">
                                </asp:Panel>  OnItemCreated="RadGrid1_ItemCreated"--%>
                                <telerik:RadGrid ID="RadGrid1"  GridLines="None" AutoGenerateColumns="false" AllowPaging="true" OnItemsRequested="RCBAcMech_ItemsRequested"
                                    AllowSorting="true" CssClass="RadGridStyle" runat="server" AllowAutomaticUpdates="true" OnSortCommand="Grid_Sort" 
                                    AllowAutomaticInserts="True" ShowStatusBar="true" OnPreRender="RadGrid1_PreRender"
                                    SkinID="gridviewSkin" OnNeedDataSource="RadGrid1_NeedDataSource" AllowCustomPaging="false">
                                    <GroupingSettings  CaseSensitive="false"/>
                                    <%--<ExportSettings HideStructureColumns="true" ExportOnlyData="true"  FileName="AricraftVisits" OpenInNewWindow="true" IgnorePaging="true"></ExportSettings>--%>
                                    <MasterTableView ShowFooter="false" Name="MasterTableView1" AllowFilteringByColumn="false" DataKeyNames="AC_VISIT_ID" EditMode="InPlace"
                                        CommandItemDisplay="None">
                                        <CommandItemSettings ShowAddNewRecordButton="false" ShowRefreshButton="false" ShowExportToExcelButton="false"
                                            ShowExportToPdfButton="false" ShowExportToCsvButton="false"></CommandItemSettings>
                                        <PagerStyle Mode="NextPrevNumericAndAdvanced" AlwaysVisible="true" />
                                        <Columns>
                                             
                                            <telerik:GridBoundColumn DataField="AC_VISIT_ID" UniqueName="AC_VISIT_ID" Display="false" ShowFilterIcon="false"/>
                                            <telerik:GridBoundColumn DataField="STA" UniqueName="STA" Display="false" ShowFilterIcon="false"/>
                                            <telerik:GridBoundColumn DataField="MRG_ID" UniqueName="MRG_ID" Display="false" ShowFilterIcon="false"/>
                                            <telerik:GridBoundColumn DataField="ARR_FROM" UniqueName="ARR_FROM" Display="false" ShowFilterIcon="false"/>
                                            <telerik:GridBoundColumn DataField="FOREIGN" ReadOnly="true" UniqueName="Foreign" HeaderText="Int" HeaderStyle-Width="15px"
                                                ItemStyle-Width="15px" AllowFiltering="false" AllowSorting="true"/>
                                            <telerik:GridBoundColumn DataField="ACREG" FilterControlWidth="20px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true" ReadOnly="true" HeaderText="AC" HeaderStyle-Width="29px"
                                                ItemStyle-Width="29px" />
                                            <telerik:GridBoundColumn DataField="Type" FilterControlWidth="20px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true" ReadOnly="true" HeaderText="Type" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" />
                                            <telerik:GridHyperLinkColumn DataNavigateUrlFields="AC_VISIT_ID" UniqueName="FromFlt" SortExpression="FromFlt"
                                                DataNavigateUrlFormatString="javascript:VisitChange({0})" HeaderText="Frm(Flt)" HeaderStyle-Width="55px"
                                                ItemStyle-Width="55px" DataTextField="FromFlt" FilterControlWidth="40px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                            </telerik:GridHyperLinkColumn>
                                            <telerik:GridTemplateColumn DataField="STAx" ReadOnly="true" HeaderText="STA" AllowFiltering="false" SortExpression="STA" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px">
                                                <ItemTemplate>
                                                    <asp:HiddenField ID="hdnACVisitID" runat="server" value='<%# Eval("AC_VISIT_ID") %>' />
                                                    <asp:Label ID="lblSTA" runat="server" ToolTip='<%# Eval("STA") %>' Text='<%# Eval("STAx") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn DataField="ETAx" HeaderStyle-Font-Bold="true" ItemStyle-Font-Bold="true" SortExpression="ETA" ReadOnly="true" AllowFiltering="false" HeaderText="ETA" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblETA" runat="server" ToolTip='<%# Eval("ETA") %>' Text='<%# Eval("ETAx") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridBoundColumn DataField="ToFlt"  ReadOnly="true" FilterControlWidth="40px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true" HeaderText="To(Flt)" HeaderStyle-Width="55px"
                                                ItemStyle-Width="55px" />
                                            <telerik:GridTemplateColumn DataField="STDx" ReadOnly="true" AllowFiltering="false" HeaderText="STD" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" SortExpression="STD">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblSTD" runat="server" ToolTip='<%# Eval("STD") %>' Text='<%# Eval("STDx") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn DataField="ETDx" HeaderStyle-Font-Bold="true" ItemStyle-Font-Bold="true" ReadOnly="true" AllowFiltering="false" HeaderText="ETD" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" SortExpression="ETD">
                                                <ItemTemplate>
                                                    <asp:Label ID="lblETD" runat="server" ToolTip='<%# Eval("ETD") %>' Text='<%# Eval("ETDx") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridBoundColumn DataField="GndTime" ReadOnly="true" AllowFiltering="false" HeaderText="GndT" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" />
                                            <telerik:GridBoundColumn DataField="ArrBay" ReadOnly="true" AllowFiltering="false" HeaderText="Arr" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" />
                                            <telerik:GridBoundColumn DataField="DepBay" ReadOnly="true" AllowFiltering="false" HeaderText="Dep" HeaderStyle-Width="25px"
                                                ItemStyle-Width="25px" />
                                            <telerik:GridTemplateColumn UniqueName="" AllowFiltering="false" HeaderText="" HeaderStyle-Width="10px"
                                                ItemStyle-Width="10px">
                                                <ItemTemplate>
                                                    <asp:ImageButton ID="lnkDDTSRWP" ImageUrl='<%# ShowImageInGrid(Eval("FUELALERT").ToString(),Eval("FUELALERTACK").ToString()) %>' runat="server" AlternateText="Edit Aircraft Visits" Height="15px" Width="15px" OnClick="lnkDDTSRWP_Click" 
                                                        OnClientClick='<%# "return OpenEditAircraftVisits(" + Eval("AC_VISIT_ID") +"," + (char)39 + Eval("FOREIGN") + (char)39 + ");"%>'>
                                                    </asp:ImageButton>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridBoundColumn DataField="Tow" ReadOnly="true" AllowFiltering="false" HeaderText="T" HeaderStyle-Width="5px"
                                                ItemStyle-Width="5px" />
                                            <telerik:GridBoundColumn DataField="ETOPS" ReadOnly="true" ItemStyle-HorizontalAlign="Left" AllowFiltering="false" HeaderText="E" HeaderStyle-Width="18px"
                                                ItemStyle-Width="15px" />
                                            <telerik:GridBoundColumn DataField="Alert" HeaderStyle-ForeColor="Red" ReadOnly="true" AllowFiltering="false" ItemStyle-ForeColor="Red" HeaderText="A" HeaderStyle-Width="5px"
                                                ItemStyle-Width="5px" />
                                            <telerik:GridTemplateColumn DataField="REMARKS" UniqueName="REMARKS" HeaderText="OldBays/ETAs/Flts" FilterControlWidth="65px" AllowFiltering="true" HeaderStyle-Width="90px"
                                                ItemStyle-Width="95px">
                                                <ItemTemplate>
                                                    <asp:TextBox ID="txtRem" runat="server" Font-Size="11px"  CssClass="lpcfilterboxtextField" MaxLength="1000" ToolTip='<%# Eval("REMARKS") %>' Text='<%# Eval("REMARKS") %>' onchange="ClientRemarks_OnTextChanged(this)"></asp:TextBox>
                                                    <asp:Label ID="lblAcVisitID" runat="server" Visible="false" Text='<%# Eval("AC_VISIT_ID") %>'></asp:Label>
                                                </ItemTemplate>
                                                <ItemStyle  Wrap="false" />
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn DataField="ChecksRemarks"  UniqueName="ChecksRemarks" FilterControlWidth="10px" AllowFiltering="true" HeaderText="Checks/Remarks" HeaderStyle-Width="10px"
                                                ItemStyle-Width="10px">
                                                <ItemTemplate>
                                                    <asp:TextBox ID="txtChkRem" Font-Size="11px" CssClass="lpcfilterboxtextField" MaxLength="1000" ToolTip='<%# Eval("ChecksRemarks") %>' runat="server"  Text='<%# Eval("ChecksRemarks") %>' onchange="ClientChecks_OnTextChanged(this)"></asp:TextBox>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn UniqueName="" HeaderText="" AllowFiltering="false" HeaderStyle-Width="10px"
                                                        ItemStyle-Width="10px">
                                                        <ItemTemplate>
                                                            <asp:ImageButton ID="lnkJOBS" ImageUrl="../images/info.png" Height="15px" Width="15px" AlternateText="View Jobs" OnClick="lnkDDTSRWP_Click"
                                                            OnClientClick='<%# "return OpenViewLineJobs("+ (char)39 + Eval("STA") + (char)39 + "," + (char)39 + Eval("MRG_ID") + (char)39 + ");"%>'
                                                                runat="server" />
                                                        </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            
                                            <telerik:GridTemplateColumn DataField="ACMECH_STAFF1" UniqueName="ACMECH" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true"  HeaderText="AC Mech" HeaderStyle-Width="30px"
                                                ItemStyle-Width="77px" ItemStyle-HorizontalAlign="Left" SortExpression="ACMECH_STAFF1">
                                                <ItemTemplate>
                                                   
                                                    <%--OnSelectedIndexChanged="RCBAcMech_OnSelectedIndexChangedHandler" OnItemsRequested="RCBAcMech_ItemsRequested"  OnClientDropDownOpening="OnJqueryOnRequestForAcMech"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBAcMech" MarkFirstMatch="true" AutoPostBack="false"
                                                        DataTextField="ACMECH_STAFF1" EnableLoadOnDemand="false" OnClientDropDownOpened="OnJqueryOnRequestForAcMech"
                                                        EnableItemCaching="true" CausesValidation="false"  DataValueField="ACMECH_STAFF1ID"  EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                        HighlightTemplatedItems="true" Height="350px" Width="75px" DropDownWidth="900px" ShowToggleImage="false" EmptyMessage="" 
                                                        OnClientSelectedIndexChanged="ClientRCBAcMech_OnSelectedIndexChanged" OnClientTextChange="ClientRCBAcMech_OnTextChanged" Text='<%# Eval("ACMECH_STAFF1") %>' ToolTip='<%# Eval("ACMECH_STAFF1") %>'
                                                        Filter="Contains" >
                                                        <HeaderTemplate>
                                                            <ul id="HeaderTemp" runat="server">
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkAcMech" runat="server" OnCheckedChanged="chkAcMech_Clicked" onclick="chkAcMech_OnClick(this)" Checked='<%# Eval("ACMECHACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblAcMech" runat="server" style="display:none;" Text='<%# Eval("ACMECH_STAFF1") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="AC Lic" UniqueName="ACLIC"  DataField="ACLIC_STAFF1" HeaderStyle-Width="70px"
                                                ItemStyle-Width="70px"  SortExpression="ACLIC_STAFF1" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <%--OnSelectedIndexChanged="RCBAclic_OnSelectedIndexChangedHandler" OnItemsRequested="RCBAclic_ItemsRequested"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBAclic" EnableLoadOnDemand="True" DataTextField="ACLIC_STAFF1" MarkFirstMatch="true" 
                                                        EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false" OnClientDropDownOpened="OnJqueryOnRequestForAcLic"
                                                         DataValueField="ACLIC_STAFF1ID" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="77px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientRCBAclic_OnSelectedIndexChanged" OnClientTextChange="ClientRCBAclic_OnTextChanged" 
                                                         Text='<%# Eval("ACLIC_STAFF1") %>' ToolTip='<%# Eval("ACLIC_STAFF1") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupportriy">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <%--<ItemTemplate>
                                                            <ul>
                                                                <li class="radcombocol1">
                                                                    <%# DataBinder.Eval(Container, "Text")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['STAFFNO']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['DEPTCODE']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SKILL_CAT']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['LIC']")%>
                                                                </li>
                                                                <li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_STARTTEMP']")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_ENDTEMP']")%>
                                                                </li>
                                                                <li class="radgfwpliccoljobcount">
                                                                    <%# DataBinder.Eval(Container, "Attributes['COUNTJOB']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['OVERLAP']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['IS_STANDBY']")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>--%>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkACLic" runat="server" OnCheckedChanged="chkACLic_Clicked" onclick="chkACLic_OnClick(this)"  Checked='<%# Eval("ACLICENGACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblACLic" runat="server" style="display:none;" Text='<%# Eval("ACLIC_STAFF1") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="AV Lic" UniqueName="AVLIC" DataField="AVLIC_STAFF1" HeaderStyle-Width="70px"
                                                ItemStyle-Width="70px" SortExpression="AVLIC_STAFF1" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <%--OnSelectedIndexChanged="RCBAvLic_OnSelectedIndexChangedHandler" OnItemsRequested="RCBAvLic_ItemsRequested"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBAvLic" EnableLoadOnDemand="True" DataTextField="AVLIC_STAFF1" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="AVLIC_STAFF1ID"  ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="77px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientRCBAvLic_OnSelectedIndexChanged" OnClientTextChange="ClientRCBAvLic_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForAvLic"
                                                         Text='<%# Eval("AVLIC_STAFF1") %>' ToolTip='<%# Eval("AVLIC_STAFF1") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <%--<ItemTemplate>
                                                            <ul>
                                                                <li class="radcombocol1">
                                                                    <%# DataBinder.Eval(Container, "Text")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['STAFFNO']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['DEPTCODE']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SKILL_CAT']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['LIC']")%>
                                                                </li>
                                                                <li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_STARTTEMP']")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_ENDTEMP']")%>
                                                                </li>
                                                                <li class="radgfwpliccoljobcount">
                                                                    <%# DataBinder.Eval(Container, "Attributes['COUNTJOB']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['OVERLAP']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['IS_STANDBY']")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>--%>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkAvLic" runat="server" OnCheckedChanged="chkAvLic_Clicked" onclick="chkAvLic_OnClick(this)" Checked='<%# Eval("AVLICENGACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblAvLic" runat="server" style="display:none;" Text='<%# Eval("AVLIC_STAFF1") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="AV Mech" UniqueName="AVMECH" DataField="AVLIC_STAFF2" HeaderStyle-Width="70px"
                                                ItemStyle-Width="70px" SortExpression="AVLIC_STAFF2" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <%--OnSelectedIndexChanged="RCBAvMech_OnSelectedIndexChangedHandler" OnItemsRequested="RCBAvMech_ItemsRequested"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBAvMech" EnableLoadOnDemand="True" DataTextField="AVLIC_STAFF2" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="AVLIC_STAFF2ID" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="77px" DropDownWidth="900px" AllowCustomText="true"
                                                        OnClientSelectedIndexChanged="ClientRCBAvMech_OnSelectedIndexChanged" OnClientTextChange="ClientRCBAvMech_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForAvMech"
                                                        Text='<%# Eval("AVLIC_STAFF2") %>' ToolTip='<%# Eval("AVLIC_STAFF2") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li>
                                                                <li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                        </HeaderTemplate>
                                                        <%--<ItemTemplate>
                                                            <ul>
                                                                <li class="radcombocol1">
                                                                    <%# DataBinder.Eval(Container, "EMP_SHORTNAME")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['STAFFNO']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['DEPTCODE']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SKILL_CAT']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['GF']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['WP']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['LIC']")%>
                                                                </li>
                                                                <li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_STARTTEMP']")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_ENDTEMP']")%>
                                                                </li>
                                                                <li class="radgfwpliccoljobcount">
                                                                    <%# DataBinder.Eval(Container, "Attributes['COUNTJOB']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['OVERLAP']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['IS_STANDBY']")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>--%>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkAvMech" runat="server" OnCheckedChanged="chkAvMech_Clicked" onclick="chkAvMech_OnClick(this)" Checked='<%# Eval("AVMECHACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblAvMech" runat="server" style="display:none;" Text='<%# Eval("AVLIC_STAFF2") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="IFE" UniqueName="IFE" DataField="IFE_STAFF"
                                                 SortExpression="IFE_STAFF" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <%--OnSelectedIndexChanged="RCBIFE_OnSelectedIndexChangedHandler" OnItemsRequested="RCBIFE_ItemsRequested"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBIFE" EnableLoadOnDemand="True" DataTextField="IFE_STAFF" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="IFE_STAFFID" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="77px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientRCBIFE_OnSelectedIndexChanged" OnClientTextChange="ClientRCBIFE_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForIFE"
                                                         Text='<%# Eval("IFE_STAFF") %>' ToolTip='<%# Eval("IFE_STAFF") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <%--<ItemTemplate>
                                                            <ul>
                                                                <li class="radcombocol1">
                                                                    <%# DataBinder.Eval(Container, "EMP_SHORTNAME")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['STAFFNO']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['DEPTCODE']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SKILL_CAT']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['GF']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['WP']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['LIC']")%>
                                                                </li>
                                                                <li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_STARTTEMP']")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_ENDTEMP']")%>
                                                                </li>
                                                                <li class="radgfwpliccoljobcount">
                                                                    <%# DataBinder.Eval(Container, "Attributes['COUNTJOB']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['OVERLAP']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['IS_STANDBY']")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>--%>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkIFE" runat="server" OnCheckedChanged="chkIFE_Clicked" onclick="chkIFE_OnClick(this)" Checked='<%# Eval("IFEACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblIFE" runat="server" style="display:none;" Text='<%# Eval("IFE_STAFF") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="IFE Mech" UniqueName="IFELIC_STAFF" DataField="IFEMECHSTAFF" HeaderStyle-Width="70px"
                                               ItemStyle-Width="70px"  SortExpression="IFEMECHSTAFF" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <telerik:RadComboBox runat="server" ID="RCBIFELIC_STAFF" EnableLoadOnDemand="True" DataTextField="IFEMECHSTAFF" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="IFELIC_STAFF" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="50px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientIFE_OnSelectedIndexChanged" OnClientTextChange="ClientIFE_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForIFEMECH"
                                                         Text='<%# Eval("IFEMECHSTAFF") %>' ToolTip='<%# Eval("IFEMECHSTAFF") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                      
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkIFELIC_STAFF" runat="server" OnCheckedChanged="chkIFELIC_Clicked"  onclick="chkIFELIC_OnClick(this)"    Checked='<%# Eval("IFEMECH_ACK").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblIFELIC_STAFF" runat="server" style="display:none;" Text='<%# Eval("IFEMECHSTAFF") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="CB" UniqueName="CB" DataField="CB_STAFF"
                                                SortExpression="CB_STAFF" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <%--OnSelectedIndexChanged="RCBCb_OnSelectedIndexChangedHandler" OnItemsRequested="RCBCb_ItemsRequested"--%>
                                                    <telerik:RadComboBox runat="server" ID="RCBCb" EnableLoadOnDemand="True" DataTextField="CB_STAFF" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="CB_STAFFID" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="77px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientRCBCb_OnSelectedIndexChanged" OnClientTextChange="ClientRCBCb_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForCB"
                                                         Text='<%# Eval("CB_STAFF") %>' ToolTip='<%# Eval("CB_STAFF") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                        <%--<ItemTemplate>
                                                            <ul>
                                                                <li class="radcombocol1">
                                                                    <%# DataBinder.Eval(Container, "EMP_SHORTNAME")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['STAFFNO']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['DEPTCODE']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SKILL_CAT']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['GF']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['WP']")%>
                                                                </li>
                                                                <li class="radgfwpliccol">
                                                                    <%# DataBinder.Eval(Container, "Attributes['LIC']")%>
                                                                </li>
                                                                <li class="radcombocol3">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_STARTTEMP']")%>
                                                                </li>
                                                                <li class="radcombocol4">
                                                                    <%# DataBinder.Eval(Container, "Attributes['SHIFT_ENDTEMP']")%>
                                                                </li>
                                                                <li class="radgfwpliccoljobcount">
                                                                    <%# DataBinder.Eval(Container, "Attributes['COUNTJOB']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['OVERLAP']")%>
                                                                </li>
                                                                <li class="radcombocol2">
                                                                    <%# DataBinder.Eval(Container, "Attributes['IS_STANDBY']")%>
                                                                </li>
                                                            </ul>
                                                        </ItemTemplate>--%>
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkCB" runat="server" OnCheckedChanged="chkCB_Clicked" onclick="chkCB_OnClick(this)"  Checked='<%# Eval("CBACKFLAG").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblCB" runat="server" style="display:none;" Text='<%# Eval("CB_STAFF") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>
                                            <telerik:GridTemplateColumn HeaderText="CB MECH" UniqueName="CBLIC_STAFF" DataField="CBMECHSTAFF" Visible="true" HeaderStyle-Width="70px"
                                               ItemStyle-Width="70px"  SortExpression="CBMECHSTAFF" FilterControlWidth="85px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true">
                                                <ItemTemplate>
                                                    <telerik:RadComboBox runat="server" ID="RCBCBLIC_STAFF" EnableLoadOnDemand="True" DataTextField="CBMECHSTAFF" MarkFirstMatch="true" EnableEmbeddedBaseStylesheet="false" EnableEmbeddedSkins="false"
                                                         DataValueField="CBMECHSTAFF" ShowToggleImage="false" EmptyMessage=""
                                                        HighlightTemplatedItems="true" Height="350px" Width="50px" DropDownWidth="900px" AllowCustomText="true" 
                                                        OnClientSelectedIndexChanged="ClientMech_OnSelectedIndexChanged" OnClientTextChange="ClientCBMech_OnTextChanged" OnClientDropDownOpened="OnJqueryOnRequestForCBMECH"
                                                         Text='<%# Eval("CBMECHSTAFF") %>' ToolTip='<%# Eval("CBMECHSTAFF") %>' Filter="Contains">
                                                        <HeaderTemplate>
                                                            <ul>
                                                                <li class="radcombocoldesupport1">Name</li>
                                                                <li class="radcombocoldesupport2">Staff No</li>
                                                                <li class="radgfwpliccoldesupport">Dept</li>
                                                                <li class="radcombocoldesupport2">Skill Cat</li>
                                                                <li class="radgfwpliccoldesupport">GF</li>
                                                                <li class="radgfwpliccoldesupport">WP</li>
                                                                <li class="radgfwpliccoldesupport">LIC</li>
                                                                <li class="radcombocoldesupport3">Shift Start</li>
                                                                <li class="radcombocoldesupport4">Shift End</li>
                                                                <li class="radgfwpliccoljobcountdesupport">Cnt</li>
                                                                <li class="radgfwpliccoloverlapdesupport">Overlap</li>
                                                                <li class="radgfwplicstandbycoldesupport">StandBy</li><li class="radgfwpliccoljobcountdesupport">ClkIn</li>
                                                            </ul>
                                                        </HeaderTemplate>
                                                      
                                                    </telerik:RadComboBox>
                                                    <asp:CheckBox ID="chkLicCB" runat="server"  OnCheckedChanged="chkLicCB_Clicked" onclick="chkCBMECH_OnClick(this)"   Checked='<%# Eval("CBMECH_ACK").ToString()=="Y" ? true : false %>'/>
                                                    <asp:Label ID="lblLicCB" runat="server" style="display:none;" Text='<%# Eval("CBMECHSTAFF") %>'></asp:Label>
                                                </ItemTemplate>
                                            </telerik:GridTemplateColumn>

                                           <%--New Column--%>


                                           
                                              <%--End New Column--%>


                                            <telerik:GridBoundColumn DataField="Area" UniqueName="Area" HeaderText="Area" ReadOnly="true" HeaderStyle-Width="45px"
                                                SortExpression="Area"  FilterControlWidth="40px" CurrentFilterFunction="Contains" ShowFilterIcon="false" AutoPostBackOnFilter="true" />
                                        </Columns>
                                    </MasterTableView>
                                    <FilterMenu OnClientShowing="MenuShowing" />
                                    <ClientSettings>
                                        <Selecting AllowRowSelect="True"/>
                                        <Scrolling AllowScroll="True" UseStaticHeaders="True" ScrollHeight="450px" EnableVirtualScrollPaging="false"
                                            SaveScrollPosition="True"></Scrolling>
                                        <ClientEvents OnRowSelected="RowSelected" OnFilterMenuShowing="filterMenuShowing"/>
                                    </ClientSettings>
                                </telerik:RadGrid>
                            </div>
                            <div class="fieldContent center">
                                <table>
                                    <tr class="buttons">
                                        <td>
                                            <asp:LinkButton ID="lnkViewLog" runat="server"  OnClick="btnViewLog_Click">
                                                <img id="Img5" alt="ViewLog" src="../images/edit.png" runat="server" />
                                                ViewLog
                                            </asp:LinkButton>
                                        </td>
                                        <td>
                                            <asp:LinkButton ID="lnkDeleteRemovedItem" runat="server" OnClick="lnkDeleteRemovedItem_Click" OnClientClick="javascript: return RemoveVisits();">
                                                <img id="Img6" alt="Delete Removed Item" src="../images/ico-Clear.png" runat="server" />
                                                Delete Removed Item
                                            </asp:LinkButton>
                                        </td>
                                        <td class="buttons">
                                            <asp:LinkButton ID="lnkAircraftVisits" runat="server" OnClientClick="javascript: return AddForeignCarrierFlights();">
                                                <img id="Img2" alt="Add Aircraft Visits" src="../images/ico-add.png" runat="server" />
                                                Add Aircraft Visits
                                            </asp:LinkButton>
                                            <asp:LinkButton ID="lnkImportBays" runat="server"  OnClick="lnkImportBays_Click" OnClientClick="javascript: return ImportBays();">
                                                <img id="Img1" alt="Search" src="../images/Bay.png" runat="server" />
                                                Import Bays
                                            </asp:LinkButton>
                                            <asp:LinkButton ID="lnkDatasheet" runat="server" OnClientClick="javascript: return Datasheet();">
                                                <img id="Img3" alt="Datasheet" src="../images/Database.png" runat="server" />
                                                Datasheet
                                            </asp:LinkButton>
                                            <asp:LinkButton ID="lnkHistory" runat="server" OnClientClick="javascript: return History();">
                                                <img id="Img4" alt="History" src="../images/history.png" runat="server" />
                                                History
                                            </asp:LinkButton>
                                            <asp:LinkButton ID="lnkRefresh" runat="server" OnClick="lnkRefresh_Click">
                                                <img id="Img8" alt="Refresh" src="../images/refresh.png" runat="server" />
                                                Refresh
                                            </asp:LinkButton>
                                            <asp:LinkButton ID="lnkImportClock" runat="server" OnClick="lnkImportClk_Click">
                                                <img id="Img7" alt="ImportClk" src="../images/ico-receive.png" runat="server" />
                                                Import Clock
                                            </asp:LinkButton>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
            </div>
            </div>
        </div>
        </div>
    </div>

    <script>

        $(function () {






            $('#ctl00_ContentPlaceHolder1_ddAcTypeSearch1_CB1').find('li').removeClass('rcbItem');


            //$('#ctl00_ContentPlaceHolder1_ddAcTypeSearch1_CB1').find('table').removeAttr('style').find('tr:first').find('td:first').find('input').removeClass('rcbInput').removeClass('radPreventDecorate').attr('style', 'width: 100%');

            //removeAttr("style").attr("style", "width: 160px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-collapse: collapse; table-layout: fixed;");
        }); 

          Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

        function BeginRequestHandler(sender, args) {




        }

        function EndRequestHandler(sender, args) {

            
            $(function () {






                $('#ctl00_ContentPlaceHolder1_ddAcTypeSearch1_CB1').find('li').removeClass('rcbItem');


                //$('#ctl00_ContentPlaceHolder1_ddAcTypeSearch1_CB1').find('table').removeAttr('style').find('tr:first').find('td:first').find('input').removeClass('rcbInput').removeClass('radPreventDecorate').attr('style', 'width: 100%');

                //removeAttr("style").attr("style", "width: 160px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-collapse: collapse; table-layout: fixed;");
            }); 
        }

    
    </script>
    
</asp:Content>

<%@ Page Language="C#" AutoEventWireup="true" EnableViewState="true" EnableEventValidation="false"
    CodeBehind="DashBoard.aspx.cs" Inherits="QR.AMPPS.UI.IFE.DashBoard" %>

<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<script type="text/javascript" src="../Js/jquery.min.js"></script>
<link href="http://localhost:59871/IFE/Js/jquery.dynatable.css" rel="stylesheet"
    type="text/css" />
<script src="http://localhost:59871/IFE/Js/jquery.dynatable.js" type="text/javascript"></script>
<script language="javascript" src="../Js/LOPA.js" type="text/javascript"></script>
<link href="../App_Themes/USERMGMT/common.css" rel="stylesheet" type="text/css" />
<style type="text/css">
    .redbg
    {
        background-color: #636B6E !important;
        color: White !important;
    }
    .nocolor
    {
        background-color: inherit;
        border-color: #900651 !important;
    }
    
    .noSeat
    {
        background-color: #E2E4E6 !important;
        border: 0px !important;
    }
    
    .BCFC
    {
        width: 20px;
        border-color: #900651 !important;
    }
    
    #MainDeck
    {
        background-color: transparent;
        border: 1px solid #8e7c7c;
        border-radius: 20px;
        background: #E2E4E6;
        padding: 20px;
    }
    
    #UpperDeck
    {
        background-color: transparent;
        border: 1px solid #8e7c7c;
        border-radius: 100px;
        background: #E2E4E6;
        padding: 20px;
    }
    .Expander
    {
        color: Black;
        font-weight: bold;
        font-size: medium;
        cursor: pointer;
    }
    .HeaderLegend
    {
        background-color: #E2E4E6;
        font-weight: bold !important;
    }
    
    .table td
    {
        border: 1px solid #E2E4E6;
        border-radius: 5px;
    }
    
    .table
    {
        border-collapse: separate;
    }
    
    .table tr td
    {
        font-size: 10px;
        font-family: Arial;
        text-align: center;
        padding-left: 2px;
        height: 16px;
        overflow: hidden;
        display: inline-block;
        white-space: nowrap;
        color: Gray;
        min-width: 5px;
    }
    
    body
    {
        background-image: url(../../images/subtlenet2.png);
        background-size: cover; /* <------ */
        background-repeat: no-repeat;
        background-position: center center;
    }
    .parentTable
    {
        width: 100%;
    }
    .tableHeader
    {
        width: 80%;
    }
    .CellColor1
    {
        background-color: #F8E0E6;
    }
    .CellColor2
    {
        background-color: #990033;
    }
    .CellColor3
    {
        background-color: #9966ff;
    }
    .CellColor4
    {
        background-color: #408000;
    }
    .CellColor5
    {
        background-color: #666633;
    }
    .CellColor6
    {
        background-color: #1affff;
    }
    .CellColor7
    {
        background-color: #808080;
    }
    .CellColor8
    {
        background-color: #8f00b3;
    }
    .CellColor9
    {
        background-color: #732673;
    }
    .CellColor10
    {
        background-color: #e6ac00;
    }
</style>
<script language="javascript" type="text/javascript">
    //    function OkMainDeckGrid() {
    //        alert('dsfsdf');
    //        var commseperateID = "";
    //        ////        ////Console.log('Rakesjh');
    //        //        ////Console.log($('#MainDeck').find('.redbg'));
    //        ////        ////Console.log('Chaubey');
    //        var count = $('#MainDeck').find('.redbg').length;
    //        var dataer = $('#MainDeck').find('.redbg');
    //        //        //Console.log(dataer);
    //        for (var i = 0; i < count; i++) {
    //            //            var dataerID = $('#MainDeck').find('.redbg').find('span').eq(0).eq(i);
    //            commseperateID = commseperateID + ',' + $('#MainDeck').find('.redbg').eq(i).find('span').eq(1).attr('id');

    //        }
    //        //Console.log(commseperateID.slice(1, -1));




    //        //        dataer.find('td').each(function () {
    //        //            //Console.log(dataer.find('span').eq(1).attr('id'));
    //        //           // commseperateID = commseperateID + ',' + dataer.find('span').eq(1).attr('id');

    //        //        });
    //    }


    //    $(document).ready(function () {

    //        $('.OkMainDeckGrid').on("click", function () {
    //            var commseperateID = "";
    //            var count = $('#MainDeck').find('.redbg').length;
    //            var dataer = $('#MainDeck').find('.redbg');
    //            dataer.find('td').each(function () {
    //                //Console.log(dataer.find('span').eq(1).attr('id'));
    //                commseperateID = commseperateID + ',' + dataer.find('span').eq(1).attr('id');

    //            });
    //        });
    //    });

    function pageLoad() {
        $('.ShowDashBoard').on("click",
            function () {
                var AcRegCode = "";
                var selectedseats = [];


                var jsonResponse = $.parseJSON($('#<%=MDeckSlayout.ClientID%>').val());
                if (jsonResponse != null) {
                    var cIndex = jsonResponse.ColCnt;
                    var rIndex = jsonResponse.RowCnt;
                    var cols = jsonResponse.Columns;
                    var rws = jsonResponse.Rows;
                    var slayout = jsonResponse.SeatLayouts;
                    var comp_Cols = jsonResponse.Comp_Col;
                    var comp_Rows = jsonResponse.Comp_Row;
                    var compartments = jsonResponse.compartments;
                    var tags = '';


                    for (yy = 0; yy < compartments.split(',').length; yy++) {

                        var filter_cols = []; ;
                        var filter_rws = []; ;
                        var filter_slayout = []; ;

                        for (j = 0; j < cols.split(',').length; j++) {
                            if (compartments.split(',')[yy] == cols.split(',')[j].split('-')[1])
                                filter_cols.push(cols.split(',')[j].split('-')[0]);


                        }
                        for (j = 0; j < rws.split(',').length; j++) {
                            if (compartments.split(',')[yy] == rws.split(',')[j].split('-')[1])
                                filter_rws.push(rws.split(',')[j].split('-')[0]);

                        }

                        for (j = 0; j < slayout.length; j++) {
                            if (compartments.split(',')[yy] == slayout[j].CompSeqNo)
                                filter_slayout.push(slayout[j]);

                        }

                        var f1 = filter_cols.join();
                        var f2 = filter_rws.join();

                        cIndex = filter_cols.length;
                        rIndex = filter_rws.length;


                        var lopadisplay = new LOPA(cIndex, rIndex, f1, f2, filter_slayout, comp_Cols, comp_Rows, compartments);

                        lopadisplay.DashBoard(true);


                        tags = tags + '<td align="left">' + lopadisplay.DrawLopa('H', true, $('#selctedval').val(), AcRegCode, 'M') + '</td>';

                    }

                    $('#MainDeck').html("<table  style='margin-left:10px;' width='95%'><tr>" + tags + "</tr></table>");




                    if ($("#maindeckexpand span").text() === '+') $('#MainDeck').toggle();
                    $("#maindeckexpand span").text('-');
                }
                else
                    $('#maindeckexpand').toggle();

                var UjsonResponse = $.parseJSON($('#<%=UDeckSlayout.ClientID%>').val());
                if (UjsonResponse != null) {
                    var UcIndex = UjsonResponse.ColCnt;
                    var UrIndex = UjsonResponse.RowCnt;
                    var Ucols = UjsonResponse.Columns;
                    var Urws = UjsonResponse.Rows;
                    var Uslayout = UjsonResponse.SeatLayouts;

                    var Ucomp_Cols = UjsonResponse.Comp_Col;
                    var Ucomp_Rows = UjsonResponse.Comp_Row;
                    var Ucompartments = UjsonResponse.compartments;

                    var Utags = '';

                    for (yy = 0; yy < Ucompartments.split(',').length; yy++) {

                        var filter_cols = []; ;
                        var filter_rws = []; ;
                        var filter_slayout = []; ;

                        for (j = 0; j < Ucols.split(',').length; j++) {
                            if (Ucompartments.split(',')[yy] == Ucols.split(',')[j].split('-')[1])
                                filter_cols.push(Ucols.split(',')[j].split('-')[0]);


                        }
                        for (j = 0; j < Urws.split(',').length; j++) {
                            if (Ucompartments.split(',')[yy] == Urws.split(',')[j].split('-')[1])
                                filter_rws.push(Urws.split(',')[j].split('-')[0]);

                        }

                        for (j = 0; j < Uslayout.length; j++) {
                            if (Ucompartments.split(',')[yy] == Uslayout[j].CompSeqNo)
                                filter_slayout.push(Uslayout[j]);

                        }

                        var f1 = filter_cols.join();
                        var f2 = filter_rws.join();

                        UcIndex = filter_cols.length;
                        UrIndex = filter_rws.length;


                        var upperdecklopa = new LOPA(UcIndex, UrIndex, f1, f2, filter_slayout, Ucomp_Cols, Ucomp_Rows, Ucompartments);
                        upperdecklopa.DashBoard(true);

                        // var upperdecklopa = new LOPA(UcIndex, UrIndex, Ucols, Urws, Uslayout);
                        Utags = Utags + '<td align="left">' + upperdecklopa.DrawLopa('H', true, $('#selctedval').val(), AcRegCode, 'U') + '</td>';

                    }

                    //var upperdecklopa = new LOPA(UcIndex, UrIndex, Ucols, Urws, Uslayout);
                    //var upperdecktags = upperdecklopa.DrawLopa('H', true, $('#selctedval').val(), AcRegCode, 'U');

                    $('#UpperDeck').html("<table  style='margin-left:10px;' width='95%'><tr>" + Utags + "</tr></table>");
                    //$('#UpperDeck').html(upperdecktags);
                    if ($("#upperdeckexpand span").text() === '+') $('#UpperDeck').toggle();
                    $("#upperdeckexpand span").text('-');

                }
                else
                    $('#upperdeckexpand').toggle();

                $('#MainDeck').on('mousedown', 'td', function () {

                    if (Arrange($(this), selectedseats) == true) {
                        //                        //Console.log($(this).find('div').eq(0).attr('id') + $(this).find('div').eq(1).attr('id'));

                        //                        var comboboxrdSeatType = $find("<%= rdSeatType.ClientID %>");
                        //                        var valuerdSeatType = comboboxrdSeatType.get_selectedItem().get_value();
                        //                        var items = comboboxrdSeatType.get_items();

                        //                        var combo = $find("<%= rdSeatType.ClientID %>");
                        //                        combo.trackChanges();
                        //                        for (var i = 0; i < combo.get_items().get_count(); i++) {
                        //                            console.log(combo.get_items().get_count());
                        //                            console.log(combo.get_checkedItems());
                        //                            var rakesh = combo.get_items().getItem(i).set_checked(false);

                        //                        }



                        //                        var arrWO = combo.get_checkedItems();
                        //                        var strWO;
                        //                        if (arrWO.length > 0) {
                        //                            console.log(1);
                        //                            var texts = [];
                        //                            for (var i = 0; i < arrWO.length; i++) {
                        //                                console.log(2);
                        //                                texts.push(arrWO[i].get_text());
                        //                            }
                        //                            strWO = texts.join();
                        //                            console.log(3);
                        //                        }
                        //                        console.log(strWO);




                        var valueID = $(this).find('div').eq(0).attr('id') + $(this).find('div').eq(1).attr('id');
                        var ac_Reg = $('#tRCBMngAcReg_Input').val();
                        var skill = $('#cmbSkill_Input').val();
                        var classType = $('#tRCBClass_Input').val();
                        var item_type = $('#tRCBItemType_Input').val();
                        var item_categ = $('#tRCBItemCat_Input').val();
                        var txtflightNum = $('#txtFlightNum').val();
                        var seatType = $('#rdSeatType_Input').val();


                        var txtfromDate = $('#txtFromDate_dateInput').val();
                        var txtTo_Date = $('#txtToDate_dateInput').val();


                        //$('.btnTriggerCSS').click(); Make an ajax call and bind the Grid.
                        //                        Start
                        $.ajax({
                            type: "POST",
                            url: "DashBoard.aspx/getresultTable",
                            contentType: "application/json; charset=utf-8",
                            //                                                    data: "{'acVisit':' " + AcVisitTxt + "',changetype:'" + changetype + "'}",
                            data: "{ID:'" + valueID + "',ac_Reg:'" + ac_Reg + "',skill:'" + skill + "',classType:'" + classType + "',item_type:'" + item_type + "',item_categ:'" + item_categ + "',txtflightNum:'" + txtflightNum + "',seatType:'" + seatType + "',txtfromDate:'" + txtfromDate + "',txtTo_Date:'" + txtTo_Date + "'}",
                            dataType: "json",
                            success: function (msg) {
                                //alert(msg.d);
                                var obj = $.parseJSON(msg.d);
                                $.each(obj, function (a, item) {
                                    console.log("<table style='width: 860px;align:left;'><tr><td style='width: 85px;'>" + item.IFE_ID + "</td><td style='width: 45px;'>" + item.ACTIVITY_REF + "</td>" +
                        "<td style='width: 30px;'>" + item.SOURCE_SYSTEM + "</td><td style='width: 50px;'>" + item.TASK_TYPE + "</td><td style='width: 30px;'>" + item.CREW_CODE + "</td>" +
                        "<td style='width: 27px;'>" + item.SHIFT_CATEGORY + "</td><td style='width: 30px;'>" + item.STATUS + "</td>" +
                        "<td style='width: 145px;'>" + item.RAISED_ON_FLIGHTNO + "</td><td style='width: 150px;'>" + item.IS_CRITICAL + "</td>" +
                        "<td style='width: 30px;'>" + item.DEFECT_DESC + "</td><td style='width: 40px;'>" + item.ADDITIONAL_INFO + "</td><td style='width: 85px;'>" + item.REMARKS + "</td><td style='width: 30px;'>" + item.RAISED_DATE + "</td></tr></table>");
                                });
//                                var results = obj;
//                                console.log(obj);
//                                if (results.length > 0) {
//                                    // iterating through the results array
//                                    for (var i = 0; i < results.length; i++) {
//                                        // get i-th object in the results array  
//                                        console.log(results(i));
//                                    }
//                                }
//                                else {
//                                    console.log("No columns");
//                                }
                                //                                var customers = new Array();
                                //                                customers.push(msg.d);
                                //                                var table = $("<table />");
                                //                                table[0].border = "1";

                                //                                //Get the count of columns.
                                //                                var columnCount = customers[0].length;

                                //                                //Add the header row.
                                //                                var row = $(table[0].insertRow(-1));
                                //                                for (var i = 0; i < columnCount; i++) {
                                //                                    var headerCell = $("<th />");
                                //                                    headerCell.html(customers[0][i]);
                                //                                    row.append(headerCell);
                                //                                }

                                //                                //Add the data rows.
                                //                                for (var i = 1; i < customers.length; i++) {
                                //                                    row = $(table[0].insertRow(-1));
                                //                                    for (var j = 0; j < columnCount; j++) {
                                //                                        var cell = $("<td />");
                                //                                        cell.html(customers[i][j]);
                                //                                        row.append(cell);
                                //                                    }
                                //                                }


                                //                                var dvTable = $("#childtable1");
                                //                                dvTable.html("");
                                //                                dvTable.append(table);
                            },
                            error: function () {
                            }
                        });

                        //                        END

                    }



                });

                $('#MainDeck').on('mouseover', 'td', function () {





                    //                    if (mousedown) {

                    //                        Arrange($(this), selectedseats);
                    //                    }

                    if ($(this).hasClass('nocolor') || $(this).hasClass('redbg')) {
                        //                        //Console.log($(this).find('div').eq(0).attr('id') + $(this).find('div').eq(1).attr('id'));

                        $('#topclass1').text($(this).find('span').eq(0).attr('id'));
                        $('#topclass2').text($(this).find('div').eq(0).attr('id') + $(this).find('div').eq(1).attr('id'));
                        $('#topclass3').text($(this).contents().filter(function () { return this.nodeType == 3; }).text());
                    }


                });





                $('#UpperDeck').on('mousedown', 'td', function () {

                    Arrange($(this), selectedseats);



                });

                $('#UpperDeck').on('mouseover', 'td', function () {
                    if (mousedown) {
                        Arrange($(this), selectedseats);
                    }
                    if ($(this).hasClass('BCFC') || $(this).hasClass('redbg') || $(this).hasClass('nocolor')) {
                        $('#topclass4').text($(this).find('span').eq(0).attr('id'));
                        $('#topclass5').text($(this).find('div').eq(0).attr('id') + $(this).find('div').eq(1).attr('id'));
                        $('#topclass6').text($(this).contents().filter(function () { return this.nodeType == 3; }).text());

                        // alert("hiRRRRRRRRRRRRRR");
                    }
                });


                $('#btnSelect').click(function () {
                    var res = $('#selctedval').val();
                    if ($('#selctedval').val().charAt(0) === ',') {
                        res = $('#selctedval').val().slice(1);
                    }
                    window.opener.setvalue(res, flag);
                    window.close();
                    return false;
                });

                $('#btnClear').click(function () {
                    selectedseats.length = 0;
                    $('#selctedval').val('');

                    $('#tblDeck td .redbg').attr('class', 'nocolor');

                    //$(this).css('background-color', '#EEEEEE');
                    //$('#tblDeck td').css('background-color', '#EEEEEE');
                    //$('#tblDeck td').css('color', 'Gray');



                    return false;
                });


                $("#maindeckexpand span").click(function () {
                    $('#MainDeck').toggle();
                    if ($(this).text() === '-') $(this).text('+')
                    else $(this).text('-')
                });

                $("#upperdeckexpand span").click(function () {
                    $('#UpperDeck').toggle();
                    if ($(this).text() === '-') $(this).text('+')
                    else $(this).text('-')

                });



                var tblw = 0;
                var tblw1 = 0;

                $('#MainDeck').find('#lopatable').each(function () {

                    tblw = tblw + $(this).width();

                });

                $('#UpperDeck').find('#lopatable').each(function () {

                    tblw1 = tblw1 + $(this).width();

                });





                $('#MainDeck').css({ 'width': (tblw + 50) + 'px' });
                $('#UpperDeck').css({ 'width': (tblw1 + 50) + 'px' });




                if ($('#MainDeck').text().trim().length == 0)
                    $('#MainDeck').closest('td').hide();
                else
                    $('#MainDeck').closest('td').show();

                if ($('#UpperDeck').text().trim().length == 0)
                    $('#UpperDeck').closest('td').hide();
                else
                    $('#UpperDeck').closest('td').show();



            });

    }

    var unFocus = function () {

        try {
            if (document.selection) {
                document.selection.empty()
            } else {
                window.getSelection().removeAllRanges()
            }
        }
        catch (e) {

        }
    }


    $(document).ready(function () {


        document.getElementById('MainDeck').onmousemove = function () {
            unFocus()
        }

        document.getElementById('MainDeck').onmouseup = function () {
            unFocus()
        }

        document.getElementById('UpperDeck').onmousemove = function () {
            unFocus()
        }

        document.getElementById('UpperDeck').onmouseup = function () {
            unFocus()
        }






    });





    $(window).scroll(function () {


        var s = $(window).scrollLeft();



        //   $('.buttons').css({ 'left': s + 'px', 'position': 'absolute' });




    })


    var mousedown = false;

    $(document).mousedown(function () { mousedown = true; });
    $(document).mouseup(function () { mousedown = false; });

    function Arrange(obj, selectedseats) {



        if ($(obj).hasClass('HeaderLegend') || $(obj).hasClass('noSeat'))
            return false;

        var clone = $(obj).clone();
        clone.find('span').remove();
        clone.find('table').remove();
        if (clone.html() != '') {
            $(obj).toggleClass('redbg nocolor');

            if ($(obj).attr('class') === 'nocolor') {

                var i = selectedseats.indexOf(clone.html()); if (i != -1) { selectedseats.splice(i, 1); }
                //selectedseats.pop(clone.html());
            }
            else {
                if ($.inArray(clone.html(), selectedseats) === -1)
                    selectedseats.push(clone.html());
            }
            $('#selctedval').val(selectedseats.join(","));
        }

        return true;

    }



    function onDropDownClosed(combo, eventArgs) {
        var val = combo.get_text();
        if (val == "") {
            combo.clearSelection();
            var item = combo.findItemByValue('ALL');
            if (item)
                item.select();
            combo.commitChanges();
        }
        if (combo._checkedIndices == "") {
            combo.set_emptyMessage(" ");
        }
    }

</script>
<html>
<body>
    <input type="hidden" runat="server" id="MDeckCols" value="" />
    <input type="hidden" runat="server" id="MDeckRows" value="" />
    <input type="hidden" runat="server" id="MDeckCcnt" value="0" />
    <input type="hidden" runat="server" id="MDeckRcnt" value="0" />
    <input type="hidden" runat="server" id="MDeckSlayout" value="" />
    <input type="hidden" runat="server" id="UDeckCols" value="" />
    <input type="hidden" runat="server" id="UDeckRows" value="" />
    <input type="hidden" runat="server" id="UDeckCcnt" value="0" />
    <input type="hidden" runat="server" id="UDeckRcnt" value="0" />
    <input type="hidden" runat="server" id="UDeckSlayout" value="" />
    <div>
        <table class="parentTable">
            <tr>
                <td>
                    <form id="Form1" runat="server">
                    <%--<asp:Button runat="server" style="display:none;" Id="btnTrigger" OnClick="btnTrigger_Click" CssClass="btnTriggerCSS" />--%>
                    <telerik:RadScriptManager runat="server" ID="ScriptManager1" EnablePageMethods="true"
                        EnableScriptCombine="true" EnablePartialRendering="true" ScriptMode="Release"
                        AsyncPostBackTimeout="1000">
                    </telerik:RadScriptManager>
                    <table class="tableHeader">
                        <tr>
                            <td>
                                AC REG
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="tRCBMngAcReg" DataTextField="AC_REG_CODE"
                                    BackColor="#F5D3EE" ShowMoreResultsBox="false" DataValueField="MRG_ID" Height="500px"
                                    Width="100px" AutoPostBack="false" DropDownWidth="100px" HighlightTemplatedItems="true"
                                    MarkFirstMatch="true" EmptyMessage="" CssClass="mandatelkp MNGACREG" OnItemDataBound="tRCBMngAcReg_ItemsDataBound">
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvtRCBMngAcReg" Display="Dynamic" runat="server"
                                    ControlToValidate="tRCBMngAcReg" ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Skill
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="cmbSkill" Width="70px" EmptyMessage="" BackColor="#F5D3EE"
                                    DropDownWidth="70px" HighlightTemplatedItems="true" MarkFirstMatch="true" EnableLoadOnDemand="True"
                                    AutoPostBack="true" OnSelectedIndexChanged="cmbSkill_SelectedIndexChanged">
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvcmbSkill" Display="Dynamic" runat="server" ControlToValidate="cmbSkill"
                                    ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Class Type
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="tRCBClass" Width="120px" EmptyMessage=""
                                    BackColor="#F5D3EE" DropDownWidth="150px" Height="130px" EnableCheckAllItemsCheckBox="true"
                                    CheckBoxes="true">
                                    <Localization CheckAllString="All" />
                                    <Items>
                                        <telerik:RadComboBoxItem Text="First Class" Value="F" />
                                        <telerik:RadComboBoxItem Text="Business Class" Value="J" />
                                        <telerik:RadComboBoxItem Text="Economy Class" Value="Y" />
                                    </Items>
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvtRCBClass" Display="Dynamic" runat="server" ControlToValidate="tRCBClass"
                                    ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Item Type
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="tRCBItemType" DataTextField="COD_VAL" ShowMoreResultsBox="false"
                                    BackColor="#F5D3EE" DataValueField="COD_ID" Height="130px" Width="110px" OnSelectedIndexChanged="tRCBItemType_SelectedIndexChanged"
                                    DropDownWidth="250px" HighlightTemplatedItems="true" MarkFirstMatch="true" AutoPostBack="true"
                                    EnableCheckAllItemsCheckBox="true" CheckBoxes="true">
                                    <Localization CheckAllString="All" />
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvtRCBItemType" Display="Dynamic" runat="server"
                                    ControlToValidate="tRCBItemType" ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Item Category
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="tRCBItemCat" DataTextField="COD_VAL" ShowMoreResultsBox="false"
                                    BackColor="#F5D3EE" DataValueField="COD_ID" Height="250px" Width="150px" DropDownWidth="250px"
                                    HighlightTemplatedItems="true" MarkFirstMatch="true" EnableCheckAllItemsCheckBox="true"
                                    CheckBoxes="true">
                                    <Localization CheckAllString="All" />
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvtRCBItemCat" Display="Dynamic" runat="server"
                                    ControlToValidate="tRCBItemCat" ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Flight No
                            </td>
                            <td>
                                <asp:TextBox ID="txtFlightNum" runat="server" CssClass="textField" BackColor="#F5D3EE"
                                    Style="margin-left: 5px" />
                                <asp:RequiredFieldValidator ID="rfvtxtFlightNum" Display="Dynamic" runat="server"
                                    ControlToValidate="txtFlightNum" ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                Seat Type
                            </td>
                            <td>
                                <telerik:RadComboBox runat="server" ID="rdSeatType" Width="120px" EmptyMessage=""
                                    BackColor="#F5D3EE" DropDownWidth="150px" Height="130px" EnableCheckAllItemsCheckBox="true"
                                    CheckBoxes="true">
                                    <Localization CheckAllString="All" />
                                    <Items>
                                        <telerik:RadComboBoxItem Text="IMPACTED" Value="IMPACTED" />
                                        <telerik:RadComboBoxItem Text="UNAVAILABLE" Value="UNAVAILABLE" />
                                    </Items>
                                </telerik:RadComboBox>
                                <asp:RequiredFieldValidator ID="rfvrdSeatType" Display="Dynamic" runat="server" ControlToValidate="rdSeatType"
                                    ValidationGroup="DashBoard" Text="*" ForeColor="Red"></asp:RequiredFieldValidator>
                            </td>
                            <td>
                                From
                            </td>
                            <td>
                                <telerik:RadDatePicker ID="txtFromDate" runat="server" ShowPopupOnFocus="true" DateInput-BackColor="#F5D3EE"
                                    DateInput-DateFormat="dd-MMM-yyyy" Width="100px">
                                    <DatePopupButton Visible="false" />
                                </telerik:RadDatePicker>
                                <asp:RequiredFieldValidator ID="rfvtxtFromDate" runat="server" ValidationGroup="DashBoard"
                                    ControlToValidate="txtFromDate" Display="Dynamic">*</asp:RequiredFieldValidator>
                            </td>
                            <td>
                                To
                            </td>
                            <td>
                                <telerik:RadDatePicker ID="txtToDate" runat="server" ShowPopupOnFocus="true" DateInput-BackColor="#F5D3EE"
                                    DateInput-DateFormat="dd-MMM-yyyy" Width="100px">
                                    <DatePopupButton Visible="false" />
                                </telerik:RadDatePicker>
                                <asp:RequiredFieldValidator ID="rfvtxtToDate" runat="server" ValidationGroup="DashBoard"
                                    ControlToValidate="txtToDate" Display="Dynamic">*</asp:RequiredFieldValidator>
                            </td>
                            <td>
                                <div class="buttons" style="opacity: 1; filter: alpha(opacity=100);">
                                    <asp:LinkButton ID="btnSelect" runat="server" CausesValidation="true" ValidationGroup="DashBoard"
                                        OnClick="btnSearch_Click">
                                        <img id="Img2" alt="Search" src="../images/ico-select.png" runat="server" />Set
                                    </asp:LinkButton>
                                </div>
                            </td>
                            <td>
                                <div class="buttons" style="opacity: 1; filter: alpha(opacity=100);">
                                    <asp:LinkButton ID="btnClear" runat="server" CausesValidation="false">
                                        <img id="Img1" alt="Clear" src="../images/ico-Clear.png" runat="server" />Clear
                                    </asp:LinkButton>
                                </div>
                            </td>
                        </tr>
                    </table>
                    </form>
                </td>
                <td>
                    <button class="ShowDashBoard" runat="server" id="btnShowDashBoard">
                        Show Dashboard</button>
                </td>
            </tr>
        </table>
    </div>
    <%--New Pnale --%>
    <%--End New Panel --%>
    <div class="mrgT5">
        <div class="cf">
            <input type="hidden" id="selctedval" />
            <div class="fieldContent">
                <table id="tblDeck" width="100%">
                    <tr>
                        <td>
                            <div id="acRegACType">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td id="maindeckexpand" class="maindeckexpandClass">
                            <%--<b style="font-family: Arial">Main Deck </b><span title="Expand/Collapse" class="Expander">--%>
                            <label style="font-family: Arial; width: 100%; padding: 0px 613px 0 613px;" class="Expander">
                                Main Deck
                                <label id="topclass1">
                                </label>
                                <label id="topclass2">
                                </label>
                                <label id="topclass3">
                                </label>
                            </label>
                            <div id="MainDeck">
                            </div>
                            <div class="firstLegend" style="display: none;">
                                <table cellspacing="2" cellpadding="3">
                                    <tr>
                                        <td>
                                            Color Code:
                                        </td>
                                        <td style="padding: 0 190px 0 190px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            1
                                        </td>
                                        <td style="background-color: #F8E0E6; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            2
                                        </td>
                                        <td style="background-color: #990033; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            3
                                        </td>
                                        <td style="background-color: #9966ff; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            4
                                        </td>
                                        <td style="background-color: #408000; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            5
                                        </td>
                                        <td style="background-color: #666633; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            6
                                        </td>
                                        <td style="background-color: #1affff; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            7
                                        </td>
                                        <td style="background-color: #808080; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            8
                                        </td>
                                        <td style="background-color: #8f00b3; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            9
                                        </td>
                                        <td style="background-color: #732673; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            10
                                        </td>
                                        <td style="background-color: #e6ac00; width: 23px;">
                                        </td>
                                        <td style="padding: 0 15px 0 15px;">
                                            10+
                                        </td>
                                        <td style="background-color: #2e5cb8; width: 23px;">
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td id="upperdeckexpand">
                            <label style="font-family: Arial; width: 100%; padding: 0px 613px 0 613px;" class="Expander">
                                Upper Deck
                                <label id="topclass4">
                                </label>
                                <label id="topclass5">
                                </label>
                                <label id="topclass6">
                                </label>
                            </label>
                            <div id="UpperDeck">
                            </div>
                            <div>
                                <div class="firstLegend" style="display: none;">
                                    <table cellspacing="2" cellpadding="3">
                                        <tr>
                                            <td>
                                                Color Code:
                                            </td>
                                            <td style="padding: 0 190px 0 190px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                1
                                            </td>
                                            <td style="background-color: #F8E0E6; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                2
                                            </td>
                                            <td style="background-color: #990033; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                3
                                            </td>
                                            <td style="background-color: #9966ff; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                4
                                            </td>
                                            <td style="background-color: #408000; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                5
                                            </td>
                                            <td style="background-color: #666633; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                6
                                            </td>
                                            <td style="background-color: #1affff; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                7
                                            </td>
                                            <td style="background-color: #808080; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                8
                                            </td>
                                            <td style="background-color: #8f00b3; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                9
                                            </td>
                                            <td style="background-color: #732673; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                10
                                            </td>
                                            <td style="background-color: #e6ac00; width: 23px;">
                                            </td>
                                            <td style="padding: 0 15px 0 15px;">
                                                10+
                                            </td>
                                            <td style="background-color: #2e5cb8; width: 23px;">
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
                <div id="childtable1">
                </div>
                <div id="childtable2">
                </div>
                <div id="childtable3">
                </div>
                <div style="margin: 20px auto; width: 500px;">
                    <table border="1" cellpadding="5" id="jsonTable" style="border-collapse: collapse;">
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

